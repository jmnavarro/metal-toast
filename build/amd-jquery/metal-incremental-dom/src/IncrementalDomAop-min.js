define(["exports","metal/src/metal","./incremental-dom"],function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function l(e,n){p.push(e,n)}function r(e,n,t){p=[e,n,t]}function a(){return i("elementOpen").apply(null,p)}function u(e){return i("elementOpen").apply(null,arguments),i("elementClose")(e)}function i(e){return O[O.length-1][e]}function m(e){return i(e).apply(null,n.array.slice(arguments,1))}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function e(e,n){for(var t=0;t<n.length;t++){var l=n[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(n,t,l){return t&&e(n.prototype,t),l&&e(n,l),n}}(),o=function(){function e(){t(this,e)}return c(e,null,[{key:"getOriginalFns",value:function(){return O[0]}},{key:"startInterception",value:function(t){var i=e.getOriginalFns();t=n.object.map(t,function(e,n){return n.bind(null,i[e])}),O.push(n.object.mixin({},i,t,{attr:l,elementOpenEnd:a,elementOpenStart:r,elementVoid:u}))}},{key:"stopInterception",value:function(){O.length>1&&O.pop()}}]),e}(),O=[{attr:IncrementalDOM.attr,attributes:IncrementalDOM.attributes[IncrementalDOM.symbols["default"]],elementClose:IncrementalDOM.elementClose,elementOpen:IncrementalDOM.elementOpen,elementOpenEnd:IncrementalDOM.elementOpenEnd,elementOpenStart:IncrementalDOM.elementOpenStart,elementVoid:IncrementalDOM.elementVoid,text:IncrementalDOM.text}],p=[];IncrementalDOM.attr=m.bind(null,"attr"),IncrementalDOM.elementClose=m.bind(null,"elementClose"),IncrementalDOM.elementOpen=m.bind(null,"elementOpen"),IncrementalDOM.elementOpenEnd=m.bind(null,"elementOpenEnd"),IncrementalDOM.elementOpenStart=m.bind(null,"elementOpenStart"),IncrementalDOM.elementVoid=m.bind(null,"elementVoid"),IncrementalDOM.text=m.bind(null,"text"),IncrementalDOM.attributes[IncrementalDOM.symbols["default"]]=m.bind(null,"attributes"),e["default"]=o});