{"version":3,"sources":["Alert.js"],"names":["Alert","eventHandler_","removeAllListeners","clearTimeout","delay_","once","element","dispose","bind","syncVisible","event","contains","target","hide","visible","isDisposed","dismissible","add","on","document","handleDocClick_","hideDelay","isNumber","setTimeout","prevVisible","shouldAsync","hideCompletely_","isDef","showOrHide","removeClasses","animClasses","addClasses","emulateEnd","syncHideDelay","register","STATE","validator","isObject","value","show","body","isBoolean","elementClasses"],"mappings":"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","file":"node_modules/metal-alert/src/Alert.js","sourcesContent":["'use strict';\n\nimport { core } from 'metal';\nimport dom from 'metal-dom';\nimport Anim from 'metal-anim';\nimport Component from 'metal-component';\nimport { EventHandler } from 'metal-events';\nimport Soy from 'metal-soy';\n\nimport templates from './Alert.soy.js';\n\n/**\n * Alert component.\n */\nclass Alert extends Component {\n\tcreated() {\n\t\tthis.eventHandler_ = new EventHandler();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdetached() {\n\t\tsuper.detached();\n\t\tthis.eventHandler_.removeAllListeners();\n\t\tclearTimeout(this.delay_);\n\t}\n\n\t/**\n\t * Closes the alert, disposing it once the animation ends.\n\t */\n\tclose() {\n\t\tdom.once(this.element, 'animationend', this.dispose.bind(this));\n\t\tdom.once(this.element, 'transitionend', this.dispose.bind(this));\n\t\tthis.eventHandler_.removeAllListeners();\n\t\tthis.syncVisible(false);\n\t}\n\n\t/**\n\t * Handles document click in order to close the alert.\n\t * @param {!Event} event\n\t * @protected\n\t */\n\thandleDocClick_(event) {\n\t\tif (!this.element.contains(event.target)) {\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t/**\n\t * Hide the alert.\n\t */\n\thide() {\n\t\tthis.visible = false;\n\t}\n\n\t/**\n\t * Hides the alert completely (with display \"none\"). This is called after the\n\t * hiding animation is done.\n\t * @protected\n\t */\n\thideCompletely_() {\n\t\tif (!this.isDisposed() && !this.visible) {\n\t\t\tsuper.syncVisible(false);\n\t\t}\n \t}\n\n\t/**\n\t * Toggles the visibility of the alert.\n\t */\n\ttoggle() {\n\t\tthis.visible = !this.visible;\n\t}\n\n\t/**\n\t * Show the alert.\n\t */\n\tshow() {\n\t\tthis.visible = true;\n\t}\n\n\t/**\n\t * Synchronization logic for `dismissible` state.\n\t * @param {boolean} dismissible\n\t */\n\tsyncDismissible(dismissible) {\n\t\tif (dismissible) {\n\t\t\tthis.eventHandler_.add(dom.on(document, 'click', this.handleDocClick_.bind(this)));\n\t\t} else {\n\t\t\tthis.eventHandler_.removeAllListeners();\n\t\t}\n\t}\n\n\t/**\n\t * Synchronization logic for `hideDelay` state.\n\t * @param {?number} hideDelay\n\t */\n\tsyncHideDelay(hideDelay) {\n\t\tif (core.isNumber(hideDelay) && this.visible) {\n\t\t\tclearTimeout(this.delay_);\n\t\t\tthis.delay_ = setTimeout(this.hide.bind(this), hideDelay);\n\t\t}\n\t}\n\n\t/**\n\t * Synchronization logic for `visible` state.\n\t * @param {boolean} visible\n\t */\n\tsyncVisible(visible, prevVisible) {\n\t\tvar shouldAsync = false;\n\t\tif (!visible) {\n\t\t\tdom.once(this.element, 'animationend', this.hideCompletely_.bind(this));\n\t\t\tdom.once(this.element, 'transitionend', this.hideCompletely_.bind(this));\n\t\t} else if (core.isDef(prevVisible)) {\n\t\t\tshouldAsync = true;\n\t\t\tsuper.syncVisible(true);\n\t\t}\n\n\t\tvar showOrHide = () => {\n\t\t\tif (this.isDisposed()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdom.removeClasses(this.element, this.animClasses[visible ? 'hide' : 'show']);\n\t\t\tdom.addClasses(this.element, this.animClasses[visible ? 'show' : 'hide']);\n\n\t\t\t// Some browsers do not fire transitionend events when running in background\n\t\t\t// tab, see https://bugzilla.mozilla.org/show_bug.cgi?id=683696.\n\t\t\tAnim.emulateEnd(this.element);\n\n\t\t\tif (visible && core.isNumber(this.hideDelay)) {\n\t\t\t\tthis.syncHideDelay(this.hideDelay);\n\t\t\t}\n\t\t};\n\n\t\tif (shouldAsync) {\n\t\t\t// We need to start the animation asynchronously because of the possible\n\t\t\t// previous call to `super.syncVisible`, which doesn't allow the show\n\t\t\t// animation to work as expected.\n\t\t\tsetTimeout(showOrHide, 0);\n\t\t} else {\n\t\t\tshowOrHide();\n\t\t}\n\t}\n}\nSoy.register(Alert, templates);\n\n/**\n * Alert state definition.\n * @type {!Object}\n * @static\n */\nAlert.STATE = {\n\t/**\n\t * The CSS classes that should be added to the alert when being shown/hidden.\n\t * @type {!Object}\n\t */\n\tanimClasses: {\n\t\tvalidator: core.isObject,\n\t\tvalue: {\n\t\t\tshow: 'fade in',\n\t\t\thide: 'fade'\n\t\t}\n\t},\n\n\t/**\n\t * The body content of the alert.\n\t * @type {string}\n\t */\n\tbody: {\n\t},\n\n\t/**\n\t * Flag indicating if the alert should be dismissable (closeable).\n\t * @type {boolean}\n\t * @default true\n\t */\n\tdismissible: {\n\t\tvalidator: core.isBoolean,\n\t\tvalue: true\n\t},\n\n\t/**\n\t * The CSS classes that should be added to the alert.\n\t * @type {string}\n\t * @default 'alert-success'\n\t */\n\telementClasses: {\n\t\tvalue: 'alert-success'\n\t},\n\n\t/**\n\t * Delay hiding the alert (ms).\n\t * @type {?number}\n\t */\n\thideDelay: {\n\t},\n\n\t/**\n\t * Flag indicating if the alert is visible or not.\n\t * @type {boolean}\n\t * @default false\n\t */\n\tvisible: {\n\t\tvalue: false\n\t}\n};\n\nexport default Alert;\n"],"sourceRoot":"/source/"}