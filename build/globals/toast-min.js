(function(){this.metal=this.metal||{},this.metalNamed=this.metalNamed||{};var babelHelpers={};babelHelpers["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},babelHelpers.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},babelHelpers.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),babelHelpers.defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},babelHelpers.get=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(o)},babelHelpers.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},babelHelpers.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"abstractMethod",value:function(){throw Error("Unimplemented abstract method")}},{key:"collectSuperClassesProperty",value:function(e,t){for(var n=[e[t]];e.__proto__&&!e.__proto__.isPrototypeOf(Function);)e=e.__proto__,n.push(e[t]);return n}},{key:"getFunctionName",value:function(e){if(!e.name){var t=e.toString();e.name=t.substring(9,t.indexOf("("))}return e.name}},{key:"getUid",value:function(t,n){if(t){var o=t[e.UID_PROPERTY];return n&&!t.hasOwnProperty(e.UID_PROPERTY)&&(o=null),o||(t[e.UID_PROPERTY]=e.uniqueIdCounter_++)}return e.uniqueIdCounter_++}},{key:"identityFunction",value:function(e){return e}},{key:"isBoolean",value:function(e){return"boolean"==typeof e}},{key:"isDef",value:function(e){return void 0!==e}},{key:"isDefAndNotNull",value:function(t){return e.isDef(t)&&!e.isNull(t)}},{key:"isDocument",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&9===e.nodeType}},{key:"isElement",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&1===e.nodeType}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isNull",value:function(e){return null===e}},{key:"isNumber",value:function(e){return"number"==typeof e}},{key:"isWindow",value:function(e){return null!==e&&e===e.window}},{key:"isObject",value:function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);return"object"===t&&null!==e||"function"===t}},{key:"isPromise",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&"function"==typeof e.then}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"mergeSuperClassesProperty",value:function(t,n,o){var i=n+"_MERGED";if(t.hasOwnProperty(i))return!1;var r=e.collectSuperClassesProperty(t,n);return o&&(r=o(r)),t[i]=r,!0}},{key:"nullFunction",value:function(){}}]),e}();e.UID_PROPERTY="core_"+(1e9*Math.random()>>>0),e.uniqueIdCounter_=1,this.metal.core=e}.call(this),function(){var e=this.metal.core,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"equal",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}},{key:"firstDefinedValue",value:function(e){for(var t=0;t<e.length;t++)if(void 0!==e[t])return e[t]}},{key:"flatten",value:function(e,n){for(var o=n||[],i=0;i<e.length;i++)Array.isArray(e[i])?t.flatten(e[i],o):o.push(e[i]);return o}},{key:"remove",value:function(e,n){var o,i=e.indexOf(n);return(o=i>=0)&&t.removeAt(e,i),o}},{key:"removeAt",value:function(e,t){return 1===Array.prototype.splice.call(e,t,1).length}},{key:"slice",value:function(t,n,o){for(var i=[],r=e.isDef(o)?o:t.length,a=n;a<r;a++)i.push(t[a]);return i}}]),t}();this.metal.array=t}.call(this),function(){var e={};e.throwException=function(t){e.nextTick(function(){throw t})},e.run=function(t,n){e.run.workQueueScheduled_||(e.nextTick(e.run.processWorkQueue),e.run.workQueueScheduled_=!0),e.run.workQueue_.push(new e.run.WorkItem_(t,n))},e.run.workQueueScheduled_=!1,e.run.workQueue_=[],e.run.processWorkQueue=function(){for(;e.run.workQueue_.length;){var t=e.run.workQueue_;e.run.workQueue_=[];for(var n=0;n<t.length;n++){var o=t[n];try{o.fn.call(o.scope)}catch(i){e.throwException(i)}}}e.run.workQueueScheduled_=!1},e.run.WorkItem_=function(e,t){this.fn=e,this.scope=t},e.nextTick=function(t,n){var o=t;return n&&(o=t.bind(n)),o=e.nextTick.wrapCallback_(o),"function"==typeof setImmediate?void setImmediate(o):(e.nextTick.setImmediate_||(e.nextTick.setImmediate_=e.nextTick.getSetImmediateEmulator_()),void e.nextTick.setImmediate_(o))},e.nextTick.setImmediate_=null,e.nextTick.getSetImmediateEmulator_=function(){var e;if("function"==typeof MessageChannel&&(e=MessageChannel),"undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(e=function(){var e=document.createElement("iframe");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow,n=t.document;n.open(),n.write(""),n.close();var o="callImmediate"+Math.random(),i=t.location.protocol+"//"+t.location.host,r=function(e){e.origin!==i&&e.data!==o||this.port1.onmessage()}.bind(this);t.addEventListener("message",r,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(o,i)}}}),"undefined"!=typeof e){var t=new e,n={},o=n;return t.port1.onmessage=function(){n=n.next;var e=n.cb;n.cb=null,e()},function(e){o.next={cb:e},o=o.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(e){var t=document.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){setTimeout(e,0)}},e.nextTick.wrapCallback_=function(e){return e},this.metal.async=e}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e),this.disposed_=!1}return babelHelpers.createClass(e,[{key:"dispose",value:function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)}},{key:"disposeInternal",value:function(){}},{key:"isDisposed",value:function(){return this.disposed_}}]),e}();this.metal.Disposable=e}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"mixin",value:function(e){for(var t,n,o=1;o<arguments.length;o++){n=arguments[o];for(t in n)e[t]=n[t]}return e}},{key:"getObjectByName",value:function(e,t){var n=t||window,o=e.split(".");return o.reduce(function(e,t){return e[t]},n)}},{key:"map",value:function(e,t){for(var n={},o=Object.keys(e),i=0;i<o.length;i++)n[o[i]]=t(o[i],e[o[i]]);return n}},{key:"shallowEqual",value:function(e,t){if(e===t)return!0;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var i=0;i<n.length;i++)if(e[n[i]]!==t[n[i]])return!1;return!0}}]),e}();this.metal.object=e}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"collapseBreakingSpaces",value:function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}},{key:"escapeRegex",value:function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}},{key:"getRandomString",value:function(){var e=2147483648;return Math.floor(Math.random()*e).toString(36)+Math.abs(Math.floor(Math.random()*e)^Date.now()).toString(36)}},{key:"hashCode",value:function(e){for(var t=0,n=0,o=e.length;n<o;n++)t=31*t+e.charCodeAt(n),t%=4294967296;return t}},{key:"replaceInterval",value:function(e,t,n,o){return e.substring(0,t)+o+e.substring(n)}}]),e}();this.metal.string=e}.call(this),function(){var e=this.metal.core,t=this.metal.array,n=this.metal.async,o=this.metal.Disposable,i=this.metal.object,r=this.metal.string;this.metal.metal=e,this.metalNamed.metal=this.metalNamed.metal||{},this.metalNamed.metal.core=e,this.metalNamed.metal.array=t,this.metalNamed.metal.async=n,this.metalNamed.metal.Disposable=o,this.metalNamed.metal.object=i,this.metalNamed.metal.string=r}.call(this),function(){var e="__metal_data__",t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"get",value:function(t){return t[e]||(t[e]={delegating:{},listeners:{}}),t[e]}}]),t}();this.metal.domData=t}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=function(e){function t(e,n,o){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.emitter_=e,i.event_=n,i.listener_=o,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"disposeInternal",value:function(){this.removeListener(),this.emitter_=null,this.listener_=null}},{key:"removeListener",value:function(){this.emitter_.isDisposed()||this.emitter_.removeListener(this.event_,this.listener_)}}]),t}(e);this.metal.EventHandle=t}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.array,n=this.metalNamed.metal.Disposable,o=this.metal.EventHandle,i=function(n){function i(){babelHelpers.classCallCheck(this,i);var e=babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.events_=[],e.maxListeners_=10,e.shouldUseFacade_=!1,e}return babelHelpers.inherits(i,n),babelHelpers.createClass(i,[{key:"addListener",value:function(e,t,n){this.validateListener_(t),e=this.normalizeEvents_(e);for(var i=0;i<e.length;i++)this.addSingleListener_(e[i],t,n);return new o(this,e,t)}},{key:"addSingleListener_",value:function(e,t,n,o){this.emit("newListener",e,t),this.events_[e]||(this.events_[e]=[]),this.events_[e].push({"default":n,fn:t,origin:o});var i=this.events_[e];i.length>this.maxListeners_&&!i.warned&&(i.warned=!0)}},{key:"disposeInternal",value:function(){this.events_=[]}},{key:"emit",value:function(e){var n,o=t.slice(arguments,1),i=(this.events_[e]||[]).concat();this.getShouldUseFacade()&&(n={preventDefault:function(){n.preventedDefault=!0},target:this,type:e},o.push(n));for(var r=[],a=0;a<i.length;a++)i[a]["default"]?r.push(i[a]):i[a].fn.apply(this,o);if(!n||!n.preventedDefault)for(var s=0;s<r.length;s++)r[s].fn.apply(this,o);return"*"!==e&&this.emit.apply(this,["*",e].concat(o)),i.length>0}},{key:"getShouldUseFacade",value:function(){return this.shouldUseFacade_}},{key:"listeners",value:function(e){return(this.events_[e]||[]).map(function(e){return e.fn})}},{key:"many",value:function(e,t,n){e=this.normalizeEvents_(e);for(var i=0;i<e.length;i++)this.many_(e[i],t,n);return new o(this,e,n)}},{key:"many_",value:function(e,t,n){function o(){0===--t&&i.removeListener(e,o),n.apply(i,arguments)}var i=this;t<=0||i.addSingleListener_(e,o,!1,n)}},{key:"matchesListener_",value:function(e,t){return e.fn===t||e.origin&&e.origin===t}},{key:"normalizeEvents_",value:function(t){return e.isString(t)?[t]:t}},{key:"off",value:function(e,t){this.validateListener_(t),e=this.normalizeEvents_(e);for(var n=0;n<e.length;n++){var o=this.events_[e[n]]||[];this.removeMatchingListenerObjs_(o,t)}return this}},{key:"on",value:function(){return this.addListener.apply(this,arguments)}},{key:"once",value:function(e,t){return this.many(e,1,t)}},{key:"removeAllListeners",value:function(e){if(e)for(var t=this.normalizeEvents_(e),n=0;n<t.length;n++)this.events_[t[n]]=null;else this.events_={};return this}},{key:"removeMatchingListenerObjs_",value:function(e,t){for(var n=e.length-1;n>=0;n--)this.matchesListener_(e[n],t)&&e.splice(n,1)}},{key:"removeListener",value:function(){return this.off.apply(this,arguments)}},{key:"setMaxListeners",value:function(e){return this.maxListeners_=e,this}},{key:"setShouldUseFacade",value:function(e){return this.shouldUseFacade_=e,this}},{key:"validateListener_",value:function(t){if(!e.isFunction(t))throw new TypeError("Listener must be a function")}}]),i}(n);this.metal.EventEmitter=i}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.Disposable,n=function(t){function n(e,t,o,i){babelHelpers.classCallCheck(this,n);var r=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.blacklist_=o||{},r.originEmitter_=e,r.pendingEvents_=[],r.proxiedEvents_={},r.targetEmitter_=t,r.whitelist_=i,r.startProxy_(),r}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"addListener_",value:function(e,t){return this.originEmitter_.on(e,t)}},{key:"addListenerForEvent_",value:function(e){return this.addListener_(e,this.emitOnTarget_.bind(this,e))}},{key:"disposeInternal",value:function(){this.removeListeners_(),this.proxiedEvents_=null,this.originEmitter_=null,this.targetEmitter_=null}},{key:"emitOnTarget_",value:function(t){var n=[t].concat(e.slice(arguments,1));this.targetEmitter_.emit.apply(this.targetEmitter_,n)}},{key:"proxyEvent",value:function(e){this.shouldProxyEvent_(e)&&this.tryToAddListener_(e)}},{key:"removeListeners_",value:function(){for(var e=Object.keys(this.proxiedEvents_),t=0;t<e.length;t++)this.proxiedEvents_[e[t]].removeListener();this.proxiedEvents_={},this.pendingEvents_=[]}},{key:"setOriginEmitter",value:function(e){var t=this,n=this.originEmitter_?Object.keys(this.proxiedEvents_):this.pendingEvents_;this.removeListeners_(),this.originEmitter_=e,n.forEach(function(e){return t.proxyEvent(e)})}},{key:"shouldProxyEvent_",value:function(e){return!(this.whitelist_&&!this.whitelist_[e])&&(!this.blacklist_[e]&&!this.proxiedEvents_[e])}},{key:"startProxy_",value:function(){this.targetEmitter_.on("newListener",this.proxyEvent.bind(this))}},{key:"tryToAddListener_",value:function(e){this.originEmitter_?this.proxiedEvents_[e]=this.addListenerForEvent_(e):this.pendingEvents_.push(e)}}]),n}(t);this.metal.EventEmitterProxy=n}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.eventHandles_=[],e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"add",value:function(){for(var e=0;e<arguments.length;e++)this.eventHandles_.push(arguments[e])}},{key:"disposeInternal",value:function(){this.eventHandles_=null}},{key:"removeAllListeners",value:function(){for(var e=0;e<this.eventHandles_.length;e++)this.eventHandles_[e].removeListener();this.eventHandles_=[]}}]),t}(e);this.metal.EventHandler=t}.call(this),function(){var e=this.metal.EventEmitter,t=this.metal.EventEmitterProxy,n=this.metal.EventHandle,o=this.metal.EventHandler;this.metal.events=e,this.metalNamed.events=this.metalNamed.events||{},this.metalNamed.events.EventEmitter=e,this.metalNamed.events.EventEmitterProxy=t,this.metalNamed.events.EventHandle=n,this.metalNamed.events.EventHandler=o}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.core,n=this.metal.domData,o=this.metalNamed.events.EventHandle,i=function(o){function i(e,t,n,o){babelHelpers.classCallCheck(this,i);var r=babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n));return r.selector_=o,r}return babelHelpers.inherits(i,o),babelHelpers.createClass(i,[{key:"removeListener",value:function(){var o=n.get(this.emitter_),i=this.selector_,r=t.isString(i)?o.delegating[this.event_].selectors:o.listeners,a=t.isString(i)?i:this.event_;e.remove(r[a]||[],this.listener_),r[a]&&0===r[a].length&&delete r[a]}}]),i}(o);this.metal.DomDelegatedEventHandle=i}.call(this),function(){var e=this.metalNamed.events.EventHandle,t=function(e){function t(e,n,o,i){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));return r.capture_=i,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"removeListener",value:function(){this.emitter_.removeEventListener(this.event_,this.listener_,this.capture_)}}]),t}(e);this.metal.DomEventHandle=t}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.domData,o=this.metal.DomDelegatedEventHandle,i=this.metal.DomEventHandle,r="__metal_next_target__",a={blur:!0,error:!0,focus:!0,invalid:!0,load:!0,scroll:!0},s=function(){function s(){babelHelpers.classCallCheck(this,s)}return babelHelpers.createClass(s,null,[{key:"addClasses",value:function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?s.addClassesWithNative_(t,n):s.addClassesWithoutNative_(t,n))}},{key:"addClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){t&&e.classList.add(t)})}},{key:"addClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ",o="";t=t.split(" ");for(var i=0;i<t.length;i++){var r=t[i];n.indexOf(" "+r+" ")===-1&&(o+=" "+r)}o&&(e.className=e.className+o)}},{key:"addElementListener_",value:function(e,t,o){var i=n.get(e);s.addToArr_(i.listeners,t,o)}},{key:"addSelectorListener_",value:function(e,t,o,i){var r=n.get(e);s.addToArr_(r.delegating[t].selectors,o,i)}},{key:"addToArr_",value:function(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}},{key:"attachDelegateEvent_",value:function(e,t){var o=n.get(e);o.delegating[t]||(o.delegating[t]={handle:s.on(e,t,s.handleDelegateEvent_,!!a[t]),selectors:{}})}},{key:"closest",value:function(e,t){for(;e&&!s.match(e,t);)e=e.parentNode;return e}},{key:"append",value:function(t,n){if(e.isString(n)&&(n=s.buildFragment(n)),n instanceof NodeList)for(var o=Array.prototype.slice.call(n),i=0;i<o.length;i++)t.appendChild(o[i]);else t.appendChild(n);return n}},{key:"buildFragment",value:function(e){var t=document.createElement("div");t.innerHTML="<br>"+e,t.removeChild(t.firstChild);for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n}},{key:"contains",value:function(t,n){return e.isDocument(t)?t.documentElement.contains(n):t.contains(n)}},{key:"delegate",value:function(t,n,i,r,a){var l=s.customEvents[n];return l&&l.delegate&&(n=l.originalEvent,r=l.handler.bind(l,r)),a&&(r=r.bind(),r.defaultListener_=!0),s.attachDelegateEvent_(t,n),e.isString(i)?s.addSelectorListener_(t,n,i,r):s.addElementListener_(i,n,r),new o(e.isString(i)?t:i,n,r,e.isString(i)?i:null)}},{key:"enterDocument",value:function(e){e&&s.append(document.body,e)}},{key:"exitDocument",value:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"handleDelegateEvent_",value:function(t){s.normalizeDelegateEvent_(t);for(var n=e.isDef(t[r])?t[r]:t.target,o=!0,i=t.currentTarget,a=t.currentTarget.parentNode,l=[];n&&n!==a&&!t.stopped;)t.delegateTarget=n,o&=s.triggerMatchedListeners_(i,n,t,l),n=n.parentNode;for(var u=0;u<l.length&&!t.defaultPrevented;u++)t.delegateTarget=l[u].element,o&=l[u].fn(t);return t.delegateTarget=null,t[r]=a,o}},{key:"hasClass",value:function(e,t){return"classList"in e?s.hasClassWithNative_(e,t):s.hasClassWithoutNative_(e,t)}},{key:"hasClassWithNative_",value:function(e,t){return e.classList.contains(t)}},{key:"hasClassWithoutNative_",value:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0}},{key:"isEmpty",value:function(e){return 0===e.childNodes.length}},{key:"match",value:function(e,t){if(!e||1!==e.nodeType)return!1;var n=Element.prototype,o=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return o?o.call(e,t):s.matchFallback_(e,t)}},{key:"matchFallback_",value:function(e,t){for(var n=document.querySelectorAll(t,e.parentNode),o=0;o<n.length;++o)if(n[o]===e)return!0;return!1}},{key:"next",value:function(e,t){do if(e=e.nextSibling,e&&s.match(e,t))return e;while(e);return null}},{key:"normalizeDelegateEvent_",value:function(e){e.stopPropagation=s.stopPropagation_,e.stopImmediatePropagation=s.stopImmediatePropagation_}},{key:"on",value:function(t,n,o,r){if(e.isString(t))return s.delegate(document,n,t,o);var a=s.customEvents[n];return a&&a.event&&(n=a.originalEvent,o=a.handler.bind(a,o)),t.addEventListener(n,o,r),new i(t,n,o,r)}},{key:"once",value:function(e,t,n){var o=this.on(e,t,function(){return o.removeListener(),n.apply(this,arguments)});return o}},{key:"parent",value:function(e,t){return s.closest(e.parentNode,t)}},{key:"registerCustomEvent",value:function(e,t){s.customEvents[e]=t}},{key:"removeChildren",value:function(e){for(var t;t=e.firstChild;)e.removeChild(t)}},{key:"removeClasses",value:function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?s.removeClassesWithNative_(t,n):s.removeClassesWithoutNative_(t,n))}},{key:"removeClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){t&&e.classList.remove(t)})}},{key:"removeClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var o=0;o<t.length;o++)n=n.replace(" "+t[o]+" "," ");e.className=n.trim()}},{key:"replace",value:function(e,t){e&&t&&e!==t&&e.parentNode&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))}},{key:"stopImmediatePropagation_",value:function(){this.stopped=!0,this.stoppedImmediate=!0,Event.prototype.stopImmediatePropagation.call(this)}},{key:"stopPropagation_",value:function(){this.stopped=!0,Event.prototype.stopPropagation.call(this)}},{key:"supportsEvent",value:function(t,n){return!!s.customEvents[n]||(e.isString(t)&&(l[t]||(l[t]=document.createElement(t)),t=l[t]),"on"+n in t)}},{key:"toElement",value:function(t){return e.isElement(t)||e.isDocument(t)?t:e.isString(t)?"#"===t[0]&&t.indexOf(" ")===-1?document.getElementById(t.substr(1)):document.querySelector(t):null}},{key:"toggleClasses",value:function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?s.toggleClassesWithNative_(t,n):s.toggleClassesWithoutNative_(t,n))}},{key:"toggleClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){e.classList.toggle(t)})}},{key:"toggleClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var o=0;o<t.length;o++){var i=" "+t[o]+" ",r=n.indexOf(i);n=r===-1?n+t[o]+" ":n.substring(0,r)+" "+n.substring(r+i.length)}e.className=n.trim()}},{key:"triggerEvent",value:function(e,n,o){var i=document.createEvent("HTMLEvents");i.initEvent(n,!0,!0),t.mixin(i,o),e.dispatchEvent(i)}},{key:"triggerListeners_",value:function(e,t,n,o){var i=!0;e=e||[];for(var r=0;r<e.length&&!t.stoppedImmediate;r++)e[r].defaultListener_?o.push({element:n,fn:e[r]}):i&=e[r](t);return i}},{key:"triggerMatchedListeners_",value:function(e,t,o,i){for(var r=n.get(t),a=r.listeners[o.type],l=s.triggerListeners_(a,o,t,i),u=n.get(e).delegating[o.type].selectors,g=Object.keys(u),c=0;c<g.length&&!o.stoppedImmediate;c++)s.match(t,g[c])&&(a=u[g[c]],l&=s.triggerListeners_(a,o,t,i));return l}}]),s}(),l={};s.customEvents={},this.metal.dom=s}.call(this),function(){var e=this.metal.dom,t=this.metalNamed.events.EventEmitterProxy,n=function(t){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"addListener_",value:function(t,o){if(this.originEmitter_.addEventListener){if(this.isDelegateEvent_(t)){var i=t.indexOf(":",9),r=t.substring(9,i),a=t.substring(i+1);return e.delegate(this.originEmitter_,r,a,o)}return e.on(this.originEmitter_,t,o)}return babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addListener_",this).call(this,t,o)}},{key:"isDelegateEvent_",value:function(e){return"delegate:"===e.substr(0,9)}},{key:"isSupportedDomEvent_",value:function(t){return!this.originEmitter_||!this.originEmitter_.addEventListener||(this.isDelegateEvent_(t)&&t.indexOf(":",9)!==-1||e.supportsEvent(this.originEmitter_,t))}},{key:"shouldProxyEvent_",value:function(e){return babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"shouldProxyEvent_",this).call(this,e)&&this.isSupportedDomEvent_(e)}}]),n}(t);this.metal.DomEventEmitterProxy=n}.call(this),function(){var e=this.metal.dom,t=this.metalNamed.metal.string,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"checkAnimationEventName",value:function(){return void 0===n.animationEventName_&&(n.animationEventName_={animation:n.checkAnimationEventName_("animation"),transition:n.checkAnimationEventName_("transition")}),n.animationEventName_}},{key:"checkAnimationEventName_",value:function(e){for(var o=["Webkit","MS","O",""],i=t.replaceInterval(e,0,1,e.substring(0,1).toUpperCase()),r=[i+"End",i+"End",i+"End",e+"end"],a=0;a<o.length;a++)if(void 0!==n.animationElement_.style[o[a]+i])return o[a].toLowerCase()+r[a];return e+"end"}},{key:"checkAttrOrderChange",value:function(){if(void 0===n.attrOrderChange_){var t='<div data-component="" data-ref=""></div>',o=document.createElement("div");e.append(o,t),n.attrOrderChange_=t!==o.innerHTML}return n.attrOrderChange_}}]),n}();n.animationElement_=document.createElement("div"),n.animationEventName_=void 0,n.attrOrderChange_=void 0,this.metal.features=n}.call(this),function(){var e=this.metalNamed.metal.async,t=this.metal.dom,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"run",value:function(e,n){var o=document.createElement("script");return o.text=e,n?n(o):document.head.appendChild(o),t.exitDocument(o),o}},{key:"runFile",value:function(e,n,o){var i=document.createElement("script");i.src=e;var r=function(){t.exitDocument(i),n&&n()};return t.once(i,"load",r),t.once(i,"error",r),o?o(i):document.head.appendChild(i),i}},{key:"runScript",value:function(o,i,r){var a=function(){i&&i()};return o.type&&"text/javascript"!==o.type?void e.nextTick(a):(t.exitDocument(o),o.src?n.runFile(o.src,i,r):(e.nextTick(a),n.run(o.text,r)))}},{key:"runScriptsInElement",value:function(t,o,i){var r=t.querySelectorAll("script");r.length?n.runScriptsInOrder(r,0,o,i):o&&e.nextTick(o)}},{key:"runScriptsInOrder",value:function(t,o,i,r){n.runScript(t.item(o),function(){o<t.length-1?n.runScriptsInOrder(t,o+1,i,r):i&&e.nextTick(i)},r)}}]),n}();this.metal.globalEval=n}.call(this),function(){var e=this.metalNamed.metal.async,t=this.metal.dom,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"run",value:function(e,t){var n=document.createElement("style");return n.innerHTML=e,t?t(n):document.head.appendChild(n),n}},{key:"runFile",value:function(e,t,o){var i=document.createElement("link");return i.rel="stylesheet",i.href=e,n.runStyle(i,t,o),i}},{key:"runStyle",value:function(n,o,i){var r=function(){o&&o()};return n.rel&&"stylesheet"!==n.rel?void e.nextTick(r):("STYLE"===n.tagName?e.nextTick(r):(t.once(n,"load",r),t.once(n,"error",r)),i?i(n):document.head.appendChild(n),n)}},{key:"runStylesInElement",value:function(t,o,i){var r=t.querySelectorAll("style,link");if(0===r.length&&o)return void e.nextTick(o);for(var a=0,s=function(){o&&++a===r.length&&e.nextTick(o)},l=0;l<r.length;l++)n.runStyle(r[l],s,i)}}]),n}();this.metal.globalEvalStyles=n}.call(this),function(){var e=this.metal.dom,t=this.metal.features,n={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"};Object.keys(n).forEach(function(t){e.registerCustomEvent(t,{delegate:!0,handler:function(e,n){var o=n.relatedTarget,i=n.delegateTarget;if(!o||o!==i&&!i.contains(o))return n.customType=t,e(n)},originalEvent:n[t]})});var o={animation:"animationend",transition:"transitionend"};Object.keys(o).forEach(function(n){var i=o[n];e.registerCustomEvent(i,{event:!0,delegate:!0,handler:function(e,t){return t.customType=i,e(t)},originalEvent:t.checkAnimationEventName()[n]})})}.call(this),function(){var e=this.metal.dom,t=this.metal.domData,n=this.metal.DomEventEmitterProxy,o=this.metal.DomEventHandle,i=this.metal.features,r=this.metal.globalEval,a=this.metal.globalEvalStyles;this.metal.dom=e,this.metalNamed.dom=this.metalNamed.dom||{},this.metalNamed.dom.dom=e,this.metalNamed.dom.domData=t,this.metalNamed.dom.DomEventEmitterProxy=n,this.metalNamed.dom.DomEventHandle=o,this.metalNamed.dom.features=i,this.metalNamed.dom.globalEval=r,this.metalNamed.dom.globalEvalStyles=a}.call(this),function(){var e=this.metalNamed.events.EventEmitter,t=this.metalNamed.events.EventHandler,n=function(e){function n(e){babelHelpers.classCallCheck(this,n);var o=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return o.component_=e,o.componentRendererEvents_=new t,o.componentRendererEvents_.add(o.component_.once("render",o.render.bind(o))),o.on("rendered",o.handleRendered_),o.component_.constructor.SYNC_UPDATES_MERGED?o.componentRendererEvents_.add(o.component_.on("stateKeyChanged",o.handleComponentRendererStateKeyChanged_.bind(o))):o.componentRendererEvents_.add(o.component_.on("stateChanged",o.handleComponentRendererStateChanged_.bind(o))),o}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"disposeInternal",value:function(){this.componentRendererEvents_.removeAllListeners(),this.componentRendererEvents_=null}},{key:"handleComponentRendererStateChanged_",value:function(e){this.shouldRerender_(e)&&this.update(e)}},{key:"handleComponentRendererStateKeyChanged_",value:function(e){var t={changes:babelHelpers.defineProperty({},e.key,e)};this.shouldRerender_(t)&&this.update(t)}},{key:"handleRendered_",value:function(){this.isRendered_=!0}},{key:"hasChangedBesidesElement_",value:function(e){var t=Object.keys(e).length;return e.hasOwnProperty("element")&&t--,t>0}},{key:"render",value:function(){this.component_.element||(this.component_.element=document.createElement("div")),this.emit("rendered",!this.isRendered_)}},{key:"shouldRerender_",value:function(e){return this.isRendered_&&!this.skipUpdates_&&this.hasChangedBesidesElement_(e.changes)}},{key:"startSkipUpdates",value:function(){this.skipUpdates_=!0}},{key:"stopSkipUpdates",value:function(){this.skipUpdates_=!1}},{key:"update",value:function(){}}]),n}(e);this.metal.ComponentRenderer=n}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.async,n=this.metalNamed.metal.core,o=this.metalNamed.metal.object,i=this.metalNamed.events.EventEmitter,r=function(i){function r(e){babelHelpers.classCallCheck(this,r);var t=babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t.scheduledBatchData_=null,t.stateInfo_={},t.setShouldUseFacade(!0),t.mergeInvalidKeys_(),t.addToStateFromStaticHint_(e),t}return babelHelpers.inherits(r,i),babelHelpers.createClass(r,[{key:"addKeyToState",value:function(e,t,n){this.buildKeyInfo_(e,t,n),Object.defineProperty(this,e,this.buildKeyPropertyDef_(e))}},{key:"addToState",value:function(e,t,o){if(n.isString(e))return this.addKeyToState(e,t,o);for(var i=t||{},r=Object.keys(e),a={},s=0;s<r.length;s++){var l=r[s];this.buildKeyInfo_(l,e[l],i[l]),a[l]=this.buildKeyPropertyDef_(l)}o!==!1&&Object.defineProperties(o||this,a)}},{key:"addToStateFromStaticHint_",value:function(e){var t=this.constructor,n=!1;r.mergeStateStatic(t)&&(n=t.prototype),this.addToState(t.STATE_MERGED,e,n)}},{key:"assertValidStateKeyName_",value:function(e){if(this.constructor.INVALID_KEYS_MERGED[e])throw new Error("It's not allowed to create a state key with the name \""+e+'".');
}},{key:"buildKeyInfo_",value:function(e,t,n){this.assertValidStateKeyName_(e),this.stateInfo_[e]={config:t||{},initialValue:n,state:r.KeyStates.UNINITIALIZED}}},{key:"buildKeyPropertyDef_",value:function(e){return{configurable:!0,enumerable:!0,get:function(){return this.getStateKeyValue_(e)},set:function(t){this.setStateKeyValue_(e,t)}}}},{key:"callFunction_",value:function(e,t){return n.isString(e)?this[e].apply(this,t):n.isFunction(e)?e.apply(this,t):void 0}},{key:"callSetter_",value:function(e,t,n){var o=this.stateInfo_[e],i=o.config;return i.setter&&(t=this.callFunction_(i.setter,[t,n])),t}},{key:"callValidator_",value:function(e,t){var n=this.stateInfo_[e],o=n.config;if(o.validator){var i=this.callFunction_(o.validator,[t,e,this]);return i instanceof Error,i}return!0}},{key:"canSetState",value:function(e){var t=this.stateInfo_[e];return!t.config.writeOnce||!t.written}},{key:"disposeInternal",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"disposeInternal",this).call(this),this.stateInfo_=null,this.scheduledBatchData_=null}},{key:"emitBatchEvent_",value:function(){if(!this.isDisposed()){var e=this.scheduledBatchData_;this.scheduledBatchData_=null,this.emit("stateChanged",e)}}},{key:"get",value:function(e){return this[e]}},{key:"getState",value:function(e){for(var t={},n=e||this.getStateKeys(),o=0;o<n.length;o++)t[n[o]]=this[n[o]];return t}},{key:"getStateKeyConfig",value:function(e){return(this.stateInfo_[e]||{}).config}},{key:"getStateKeys",value:function(){return Object.keys(this.stateInfo_)}},{key:"getStateKeyValue_",value:function(e){return this.initStateKey_(e),this.stateInfo_[e].value}},{key:"hasBeenSet",value:function(e){var t=this.stateInfo_[e];return t.state===r.KeyStates.INITIALIZED||t.initialValue}},{key:"hasStateKey",value:function(e){return!!this.stateInfo_[e]}},{key:"informChange_",value:function(e,t){if(this.shouldInformChange_(e,t)){var n={key:e,newVal:this[e],prevVal:t};this.emit(e+"Changed",n),this.emit("stateKeyChanged",n),this.scheduleBatchEvent_(n)}}},{key:"initStateKey_",value:function(e){var t=this.stateInfo_[e];t.state===r.KeyStates.UNINITIALIZED&&(t.state=r.KeyStates.INITIALIZING,this.setInitialValue_(e),t.written||(t.state=r.KeyStates.INITIALIZING_DEFAULT,this.setDefaultValue_(e)),t.state=r.KeyStates.INITIALIZED)}},{key:"mergeInvalidKeys_",value:function(){n.mergeSuperClassesProperty(this.constructor,"INVALID_KEYS",function(t){return e.flatten(t).reduce(function(e,t){return t&&(e[t]=!0),e},{})})}},{key:"removeStateKey",value:function(e){this.stateInfo_[e]=null,delete this[e]}},{key:"scheduleBatchEvent_",value:function(e){this.scheduledBatchData_||(t.nextTick(this.emitBatchEvent_,this),this.scheduledBatchData_={changes:{}});var n=e.key,o=this.scheduledBatchData_.changes;o[n]?o[n].newVal=e.newVal:o[n]=e}},{key:"set",value:function(e,t){this.hasStateKey(e)&&(this[e]=t)}},{key:"setDefaultValue_",value:function(e){var t=this.stateInfo_[e].config;void 0!==t.value?this[e]=t.value:this[e]=this.callFunction_(t.valueFn)}},{key:"setInitialValue_",value:function(e){var t=this.stateInfo_[e];void 0!==t.initialValue&&(this[e]=t.initialValue,t.initialValue=void 0)}},{key:"setState",value:function(e,t){var n=this;Object.keys(e).forEach(function(t){return n.set(t,e[t])}),t&&this.scheduledBatchData_&&this.once("stateChanged",t)}},{key:"setStateKeyValue_",value:function(e,t){if(this.canSetState(e)&&this.validateKeyValue_(e,t)){var n=this.stateInfo_[e];void 0===n.initialValue&&n.state===r.KeyStates.UNINITIALIZED&&(n.state=r.KeyStates.INITIALIZED);var o=this[e];n.value=this.callSetter_(e,t,o),n.written=!0,this.informChange_(e,o)}}},{key:"shouldInformChange_",value:function(e,t){var o=this.stateInfo_[e];return o.state===r.KeyStates.INITIALIZED&&(n.isObject(t)||t!==this[e])}},{key:"validateKeyValue_",value:function(e,t){var n=this.stateInfo_[e];return n.state===r.KeyStates.INITIALIZING_DEFAULT||this.callValidator_(e,t)}}],[{key:"mergeState_",value:function(e){return o.mixin.apply(null,[{}].concat(e.reverse()))}},{key:"mergeStateStatic",value:function(e){return n.mergeSuperClassesProperty(e,"STATE",r.mergeState_)}}]),r}(i);r.INVALID_KEYS=["state","stateKey"],r.KeyStates={UNINITIALIZED:0,INITIALIZING:1,INITIALIZING_DEFAULT:2,INITIALIZED:3},this.metal.State=r}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.core,n=this.metalNamed.metal.object,o=this.metalNamed.dom.dom,i=this.metalNamed.dom.DomEventEmitterProxy,r=this.metal.ComponentRenderer,a=this.metalNamed.events.EventHandler,s=this.metal.State,l=function(r){function s(n,o){babelHelpers.classCallCheck(this,s);var i=babelHelpers.possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n));return i.attachedListeners_={},i.components={},i.elementEventProxy_=null,i.eventsStateKeyHandler_=new a,i.inDocument=!1,i.initialConfig_=n||{},i.wasRendered=!1,i.DEFAULT_ELEMENT_PARENT=document.body,t.mergeSuperClassesProperty(i.constructor,"ELEMENT_CLASSES",i.mergeElementClasses_),t.mergeSuperClassesProperty(i.constructor,"SYNC_UPDATES",e.firstDefinedValue),i.renderer_=i.createRenderer(),i.renderer_.on("rendered",i.rendered.bind(i)),i.on("stateChanged",i.handleStateChanged_),i.newListenerHandle_=i.on("newListener",i.handleNewListener_),i.on("eventsChanged",i.onEventsChanged_),i.addListenersFromObj_(i.events),i.created(),o!==!1&&i.render_(o),i.on("elementChanged",i.onElementChanged_),i}return babelHelpers.inherits(s,r),babelHelpers.createClass(s,[{key:"addElementClasses",value:function(){var e=this.constructor.ELEMENT_CLASSES_MERGED;this.elementClasses&&(e=e+" "+this.elementClasses),o.addClasses(this.element,e)}},{key:"addListenersFromObj_",value:function(e){for(var t=Object.keys(e||{}),n=0;n<t.length;n++){var o=this.extractListenerInfo_(e[t[n]]);if(o.fn){var i;i=o.selector?this.delegate(t[n],o.selector,o.fn):this.on(t[n],o.fn),this.eventsStateKeyHandler_.add(i)}}}},{key:"attach",value:function(e,t){return this.inDocument||(this.renderElement_(e,t),this.inDocument=!0,this.emit("attached",{parent:e,sibling:t}),this.attached()),this}},{key:"attached",value:function(){}},{key:"addSubComponent",value:function(e,t){this.components[e]=t}},{key:"created",value:function(){}},{key:"createRenderer",value:function(){return t.mergeSuperClassesProperty(this.constructor,"RENDERER",e.firstDefinedValue),new this.constructor.RENDERER_MERGED(this)}},{key:"delegate",value:function(e,t,n){return this.on("delegate:"+e+":"+t,n)}},{key:"detach",value:function(){return this.inDocument&&(this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.inDocument=!1,this.detached()),this.emit("detached"),this}},{key:"detached",value:function(){}},{key:"disposed",value:function(){}},{key:"disposeInternal",value:function(){this.disposed(),this.detach(),this.elementEventProxy_&&(this.elementEventProxy_.dispose(),this.elementEventProxy_=null),this.disposeSubComponents(Object.keys(this.components)),this.components=null,this.renderer_.dispose(),this.renderer_=null,babelHelpers.get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"disposeInternal",this).call(this)}},{key:"disposeSubComponents",value:function(e){for(var t=0;t<e.length;t++){var n=this.components[e[t]];n&&!n.isDisposed()&&(n.element=null,n.dispose(),delete this.components[e[t]])}}},{key:"extractListenerInfo_",value:function(e){var n={fn:e};return t.isObject(e)&&!t.isFunction(e)&&(n.selector=e.selector,n.fn=e.fn),t.isString(n.fn)&&(n.fn=this.getListenerFn(n.fn)),n}},{key:"getInitialConfig",value:function(){return this.initialConfig_}},{key:"getListenerFn",value:function(e){if(t.isFunction(this[e]))return this[e].bind(this)}},{key:"fireStateKeyChange_",value:function(e,n){var o=this["sync"+e.charAt(0).toUpperCase()+e.slice(1)];t.isFunction(o)&&(n||(n={newVal:this[e],prevVal:void 0}),o.call(this,n.newVal,n.prevVal))}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"handleStateChanged_",value:function(e){this.syncStateFromChanges_(e.changes),this.emit("stateSynced",e)}},{key:"handleNewListener_",value:function(e){this.attachedListeners_[e]=!0}},{key:"mergeElementClasses_",value:function(e){var t={};return e.filter(function(e){return!(!e||t[e])&&(t[e]=!0,!0)}).join(" ")}},{key:"onElementChanged_",value:function(e){e.prevVal!==e.newVal&&(this.setUpProxy_(),this.elementEventProxy_.setOriginEmitter(e.newVal),e.newVal&&(this.addElementClasses(),this.syncVisible(this.visible)))}},{key:"onEventsChanged_",value:function(e){this.eventsStateKeyHandler_.removeAllListeners(),this.addListenersFromObj_(e.newVal)}},{key:"render_",value:function(e,t){t||this.emit("render"),this.setUpProxy_(),this.syncState_(),this.attach(e),this.wasRendered=!0}},{key:"renderAsSubComponent",value:function(){this.render_(null,!0)}},{key:"renderElement_",value:function(e,t){var n=this.element;if(n&&(t||!n.parentNode)){var i=o.toElement(e)||this.DEFAULT_ELEMENT_PARENT;i.insertBefore(n,o.toElement(t))}}},{key:"setterElementFn_",value:function(e,t){var n=e;return n&&(n=o.toElement(e)||t),n}},{key:"setUpProxy_",value:function(){if(!this.elementEventProxy_){var e=new i(this.element,this);this.elementEventProxy_=e,n.map(this.attachedListeners_,e.proxyEvent.bind(e)),this.attachedListeners_=null,this.newListenerHandle_.removeListener(),this.newListenerHandle_=null}}},{key:"syncState_",value:function(){for(var e=this.getStateKeys(),t=0;t<e.length;t++)this.fireStateKeyChange_(e[t])}},{key:"syncStateFromChanges_",value:function(e){for(var t in e)this.fireStateKeyChange_(t,e[t])}},{key:"syncElementClasses",value:function(e,t){this.element&&t&&o.removeClasses(this.element,t),this.addElementClasses()}},{key:"syncVisible",value:function(e){this.element&&(this.element.style.display=e?"":"none")}},{key:"rendered",value:function(){}},{key:"validatorElementClassesFn_",value:function(e){return t.isString(e)}},{key:"validatorElementFn_",value:function(e){return t.isElement(e)||t.isString(e)||!t.isDefAndNotNull(e)}},{key:"validatorEventsFn_",value:function(e){return!t.isDefAndNotNull(e)||t.isObject(e)}}],[{key:"isComponentCtor",value:function(e){return e.prototype&&e.prototype[s.COMPONENT_FLAG]}},{key:"render",value:function(e,n,o){var i=n,r=o;t.isElement(n)&&(i=null,r=n);var a=new e(i,(!1));return a.render_(r),a}}]),s}(s);l.STATE={element:{setter:"setterElementFn_",validator:"validatorElementFn_"},elementClasses:{validator:"validatorElementClassesFn_"},events:{validator:"validatorEventsFn_",value:null},visible:{validator:t.isBoolean,value:!0}},l.COMPONENT_FLAG="__metal_component__",l.ELEMENT_CLASSES="",l.RENDERER=r,l.SYNC_UPDATES=!1,l.INVALID_KEYS=["components","wasRendered"],l.prototype[l.COMPONENT_FLAG]=!0,this.metal.Component=l}.call(this),function(){var e=this.metalNamed.metal.core,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"getConstructor",value:function(e){var n=t.components_[e];return n}},{key:"register",value:function(n,o){var i=o;i||(i=n.hasOwnProperty("NAME")?n.NAME:e.getFunctionName(n)),n.NAME=i,t.components_[i]=n}}]),t}();t.components_={},this.metal.ComponentRegistry=t}.call(this),function(){var e=this.metal.Component,t=this.metal.ComponentRegistry,n=this.metal.ComponentRenderer;this.metal.component=e,this.metalNamed.component=this.metalNamed.component||{},this.metalNamed.component.Component=e,this.metalNamed.component.ComponentRegistry=t,this.metalNamed.component.ComponentRenderer=n}.call(this),function(){/**
   * @license
   * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
!function(e,t){t(e.IncrementalDOM=e.IncrementalDOM||{})}(window,function(e){"use strict";function t(){}function n(e,t){this.attrs=a(),this.attrsArr=[],this.newAttrs=a(),this.staticsApplied=!1,this.key=t,this.keyMap=a(),this.keyMapValid=!0,this.focused=!1,this.nodeName=e,this.text=null}function o(){this.created=p.nodesCreated&&[],this.deleted=p.nodesDeleted&&[]}var i=Object.prototype.hasOwnProperty;t.prototype=Object.create(null);var r=function(e,t){return i.call(e,t)},a=function(){return new t},s="__incrementalDOMData",l=function(e,t,o){var i=new n(t,o);return e[s]=i,i},u=function(e){return g(e),e[s]},g=function le(e){if(!e[s]){var t=e.nodeName.toLowerCase(),n=e instanceof Element,o=n?e.getAttribute("key"):null,i=l(e,t,o);if(o&&(u(e.parentNode).keyMap[o]=e),n)for(var r=e.attributes,a=i.attrs,g=i.newAttrs,c=i.attrsArr,d=0;d<r.length;d+=1){var h=r[d],p=h.name,f=h.value;a[p]=f,g[p]=void 0,c.push(p),c.push(f)}for(var m=e.firstChild;m;m=m.nextSibling)le(m)}},c=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"foreignObject"===u(t).nodeName?null:t.namespaceURI},d=function(e,t,n,o){var i=c(n,t),r=void 0;return r=i?e.createElementNS(i,n):e.createElement(n),l(r,n,o),r},h=function(e){var t=e.createTextNode("");return l(t,"#text",null),t},p={nodesCreated:null,nodesDeleted:null};o.prototype.markCreated=function(e){this.created&&this.created.push(e)},o.prototype.markDeleted=function(e){this.deleted&&this.deleted.push(e)},o.prototype.notifyChanges=function(){this.created&&this.created.length>0&&p.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&p.nodesDeleted(this.deleted)};var f=function(e){return e instanceof Document||e instanceof DocumentFragment},m=function(e,t){for(var n=[],o=e;o!==t;)n.push(o),o=o.parentNode;return n},_=function(e){for(var t=e,n=t;t;)n=t,t=t.parentNode;return n},v=function(e){var t=_(e);return f(t)?t.activeElement:null},y=function(e,t){var n=v(e);return n&&e.contains(n)?m(n,t):[]},b=function(e,t,n){for(var o=t.nextSibling,i=n;i!==t;){var r=i.nextSibling;e.insertBefore(i,o),i=r}},E=null,C=null,S=null,k=null,D=function(e,t){for(var n=0;n<e.length;n+=1)u(e[n]).focused=t},L=function(e){var t=function(t,n,i){var r=E,a=k,s=C,l=S;E=new o,k=t.ownerDocument,S=t.parentNode;var u=y(t,S);D(u,!0);var g=e(t,n,i);return D(u,!1),E.notifyChanges(),E=r,k=a,C=s,S=l,g};return t},N=L(function(e,t,n){return C=e,P(),t(n),M(),e}),I=L(function(e,t,n){var o={nextSibling:e};return C=o,t(n),e!==C&&T(S,e,u(S).keyMap),o===C?null:C}),O=function(e,t,n){var o=u(e);return t===o.nodeName&&n==o.key},R=function(e,t){if(!C||!O(C,e,t)){var n=u(S),o=C&&u(C),i=n.keyMap,r=void 0;if(t){var a=i[t];a&&(O(a,e,t)?r=a:a===C?E.markDeleted(a):T(S,a,i))}r||(r="#text"===e?h(k):d(k,S,e,t),t&&(i[t]=r),E.markCreated(r)),u(r).focused?b(S,r,C):o&&o.key&&!o.focused?(S.replaceChild(r,C),n.keyMapValid=!1):S.insertBefore(r,C),C=r}},T=function(e,t,n){e.removeChild(t),E.markDeleted(t);var o=u(t).key;o&&delete n[o]},A=function(){var e=S,t=u(e),n=t.keyMap,o=t.keyMapValid,i=e.lastChild,r=void 0;if(i!==C||!o){for(;i!==C;)T(e,i,n),i=e.lastChild;if(!o){for(r in n)i=n[r],i.parentNode!==e&&(E.markDeleted(i),delete n[r]);t.keyMapValid=!0}}},P=function(){S=C,C=null},w=function(){return C?C.nextSibling:S.firstChild},x=function(){C=w()},M=function(){A(),C=S,S=S.parentNode},H=function(e,t){return x(),R(e,t),P(),S},F=function(){return M(),C},U=function(){return x(),R("#text",null),C},j=function(){return S},B=function(){return w()},$=function(){C=S.lastChild},G=x,K={"default":"__default"},V=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},z=function(e,t,n){if(null==n)e.removeAttribute(t);else{var o=V(t);o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}},q=function(e,t,n){e[t]=n},W=function(e,t,n){t.indexOf("-")>=0?e.setProperty(t,n):e[t]=n},Y=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var o=e.style,i=n;for(var a in i)r(i,a)&&W(o,a,i[a])}},Q=function(e,t,n){var o="undefined"==typeof n?"undefined":babelHelpers["typeof"](n);"object"===o||"function"===o?q(e,t,n):z(e,t,n)},Z=function(e,t,n){var o=u(e),i=o.attrs;if(i[t]!==n){var r=X[t]||X[K["default"]];r(e,t,n),i[t]=n}},X=a();X[K["default"]]=Q,X.style=Y;var J=3,ee=[],te=function(e,t,n,o){var i=H(e,t),r=u(i);if(!r.staticsApplied){if(n)for(var a=0;a<n.length;a+=2){var s=n[a],l=n[a+1];Z(i,s,l)}r.staticsApplied=!0}for(var g=r.attrsArr,c=r.newAttrs,d=!g.length,h=J,p=0;h<arguments.length;h+=2,p+=2){var f=arguments[h];if(d)g[p]=f,c[f]=void 0;else if(g[p]!==f)break;var l=arguments[h+1];(d||g[p+1]!==l)&&(g[p+1]=l,Z(i,f,l))}if(h<arguments.length||p<g.length){for(;h<arguments.length;h+=1,p+=1)g[p]=arguments[h];for(p<g.length&&(g.length=p),h=0;h<g.length;h+=2){var s=g[h],l=g[h+1];c[s]=l}for(var m in c)Z(i,m,c[m]),c[m]=void 0}return i},ne=function(e,t,n){ee[0]=e,ee[1]=t,ee[2]=n},oe=function(e,t){ee.push(e),ee.push(t)},ie=function(){var e=te.apply(null,ee);return ee.length=0,e},re=function(e){var t=F();return t},ae=function(e,t,n,o){return te.apply(null,arguments),re(e)},se=function(e,t){var n=U(),o=u(n);if(o.text!==e){o.text=e;for(var i=e,r=1;r<arguments.length;r+=1){var a=arguments[r];i=a(i)}n.data=i}return n};e.patch=N,e.patchInner=N,e.patchOuter=I,e.currentElement=j,e.currentPointer=B,e.skip=$,e.skipNode=G,e.elementVoid=ae,e.elementOpenStart=ne,e.elementOpenEnd=ie,e.elementOpen=te,e.elementClose=re,e.text=se,e.attr=oe,e.symbols=K,e.attributes=X,e.applyAttr=z,e.applyProp=q,e.notifications=p,e.importNode=g})}.call(this),function(){function e(e,t){g.push(e,t)}function t(e,t,n){g=[e,t,n]}function n(){return i("elementOpen").apply(null,g)}function o(e){return i("elementOpen").apply(null,arguments),i("elementClose")(e)}function i(e){return u[u.length-1][e]}function r(e){return i(e).apply(null,a.slice(arguments,1))}var a=this.metalNamed.metal.array,s=this.metalNamed.metal.object,l=function(){function i(){babelHelpers.classCallCheck(this,i)}return babelHelpers.createClass(i,null,[{key:"getOriginalFns",value:function(){return u[0]}},{key:"startInterception",value:function(r){var a=i.getOriginalFns();r=s.map(r,function(e,t){return t.bind(null,a[e])}),u.push(s.mixin({},a,r,{attr:e,elementOpenEnd:n,elementOpenStart:t,elementVoid:o}))}},{key:"stopInterception",value:function(){u.length>1&&u.pop()}}]),i}(),u=[{attr:IncrementalDOM.attr,attributes:IncrementalDOM.attributes[IncrementalDOM.symbols["default"]],elementClose:IncrementalDOM.elementClose,elementOpen:IncrementalDOM.elementOpen,elementOpenEnd:IncrementalDOM.elementOpenEnd,elementOpenStart:IncrementalDOM.elementOpenStart,elementVoid:IncrementalDOM.elementVoid,text:IncrementalDOM.text}],g=[];IncrementalDOM.attr=r.bind(null,"attr"),IncrementalDOM.elementClose=r.bind(null,"elementClose"),IncrementalDOM.elementOpen=r.bind(null,"elementOpen"),IncrementalDOM.elementOpenEnd=r.bind(null,"elementOpenEnd"),IncrementalDOM.elementOpenStart=r.bind(null,"elementOpenStart"),IncrementalDOM.elementVoid=r.bind(null,"elementVoid"),IncrementalDOM.text=r.bind(null,"text"),IncrementalDOM.attributes[IncrementalDOM.symbols["default"]]=r.bind(null,"attributes"),this.metal.IncrementalDomAop=l}.call(this),function(){var e=this.metal.metal,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"buildConfigFromCall",value:function(e){var t={};e[1]&&(t.key=e[1]);for(var n=(e[2]||[]).concat(e.slice(3)),o=0;o<n.length;o+=2)t[n[o]]=n[o+1];return t}},{key:"buildCallFromConfig",value:function(e,t){for(var n=[e,t.key,[]],o=Object.keys(t),i=0;i<o.length;i++)"children"!==o[i]&&n.push(o[i],t[o[i]]);return n}},{key:"isComponentTag",value:function(t){return!e.isString(t)||t[0]===t[0].toUpperCase()}}]),t}();this.metal.IncrementalDomUtils=t}.call(this),function(){function e(e,n){var o=babelHelpers.defineProperty({parent:a},d.CHILD_OWNER,s);return n?(o.text=e[0],e.length>1&&(o.args=e)):(o.tag=e[0],o.config=c.buildConfigFromCall(e),c.isComponentTag(o.tag)&&(o.config.ref=u.isDefAndNotNull(o.config.ref)?o.config.ref:s.buildRef(e[0])),o.config.children=[]),t(o),o}function t(e){a.config.children.push(e)}function n(){a===l?(g.stopInterception(),h=!1,r(l),r=null,a=null,s=null,l=null):a=a.parent}function o(t){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];a=e(o)}function i(t){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];e(o,!0)}var r,a,s,l,u=this.metal.metal,g=this.metal.IncrementalDomAop,c=this.metal.IncrementalDomUtils,d=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"capture",value:function(e,t){s=e,r=t,l={config:{children:[]}},a=l,h=!0,g.startInterception({elementClose:n,elementOpen:o,text:i})}},{key:"render",value:function(n,o){if(h)return void t(n);if(!o||!o(n))if(u.isDef(n.text)){var i=n.args?n.args:[];i[0]=n.text,IncrementalDOM.text.apply(null,i)}else{var r=c.buildCallFromConfig(n.tag,n.config);if(IncrementalDOM.elementOpen.apply(null,r),n.config.children)for(var a=0;a<n.config.children.length;a++)e.render(n.config.children[a],o);IncrementalDOM.elementClose(n.tag)}}}]),e}(),h=!1;d.CHILD_OWNER="__metalChildOwner",this.metal.IncrementalDomChildren=d}.call(this),function(){var e=[],t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"disposeUnused",value:function(){for(var t=0;t<e.length;t++)if(!e[t].isDisposed()){var n=e[t].getRenderer();if(!n.getParent()){e[t].element=null;var o=e[t].config.ref,i=n.getOwner();i.components[o]===e[t]?i.disposeSubComponents([o]):e[t].dispose()}}e=[]}},{key:"schedule",value:function(t){for(var n=0;n<t.length;n++)t[n].getRenderer().parent_=null,e.push(t[n])}}]),t}();this.metal.IncrementalDomUnusedComponents=t}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.dom,o=this.metalNamed.component.Component,i=this.metalNamed.component.ComponentRegistry,r=this.metalNamed.component.ComponentRenderer,a=this.metal.IncrementalDomAop,s=this.metal.IncrementalDomChildren,l=this.metal.IncrementalDomUnusedComponents,u=this.metal.IncrementalDomUtils,g=function(r){function g(e){babelHelpers.classCallCheck(this,g);var t=babelHelpers.possibleConstructorReturn(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,e));return e.context={},t.setConfig_(e,e.getInitialConfig()),t.changes_={},e.on("attached",t.handleAttached_.bind(t)),t.component_.constructor.SYNC_UPDATES_MERGED||e.on("stateKeyChanged",t.handleStateKeyChanged_.bind(t)),t.handleInterceptedAttributesCall_=t.handleInterceptedAttributesCall_.bind(t),t.handleInterceptedOpenCall_=t.handleInterceptedOpenCall_.bind(t),t.handleChildrenCaptured_=t.handleChildrenCaptured_.bind(t),t.handleChildRender_=t.handleChildRender_.bind(t),t.renderInsidePatchDontSkip_=t.renderInsidePatchDontSkip_.bind(t),t}return babelHelpers.inherits(g,r),babelHelpers.createClass(g,[{key:"attachDecoratedListeners_",value:function(e,t){if(!this.component_.wasRendered)for(var n=(t[2]||[]).concat(t.slice(3)),o=0;o<n.length;o+=2){var i=this.getEventFromListenerAttr_(n[o]);i&&!e[i+"__handle__"]&&this.attachEvent_(e,n[o],i,n[o+1])}}},{key:"attachEvent_",value:function(t,o,i,r){var a=i+"__handle__";t[a]&&(t[a].removeListener(),t[a]=null),t[o]=r,r?(e.isString(r)&&("d"===o[0]&&t.setAttribute(o,r),r=this.component_.getListenerFn(r)),t[a]=n.delegate(document,i,t,r)):t.removeAttribute(o)}},{key:"buildChildren_",value:function(e){return 0===e.length?d:e}},{key:"buildRef",value:function(t){var n=e.isString(t)?i.getConstructor(t):t,o=this.currentPrefix_+e.getUid(n,!0),r=this.generatedRefCount_[o]||0;return this.generatedRefCount_[o]=r+1,o+"sub"+r}},{key:"getSubComponent_",value:function(t,n){var o=t;e.isString(o)&&(o=i.getConstructor(t));var r=this.component_.components[n.ref];return r&&r.constructor!==o&&(r=null),r||(r=new o(n,(!1)),this.component_.addSubComponent(n.ref,r)),r.wasRendered&&(this.setConfig_(r,n),r.getRenderer().startSkipUpdates(),r.setState(n),r.getRenderer().stopSkipUpdates()),r}},{key:"guaranteeParent_",value:function(){var e=this.component_.element;if(!e||!e.parentNode){var t=document.createElement("div");return e&&n.append(t,e),t}}},{key:"handleAttached_",value:function(e){this.attachData_=e}},{key:"handleInterceptedAttributesCall_",value:function(t,n,o,i){var r=this.getEventFromListenerAttr_(o);return r?void this.attachEvent_(n,o,r,i):("checked"===o&&(i=e.isDefAndNotNull(i)&&i!==!1),"value"===o&&n.value!==i&&(n[o]=i),void(e.isBoolean(i)?(n[o]=i,i?n.setAttribute(o,""):n.removeAttribute(o)):t(n,o,i)))}},{key:"handleChildrenCaptured_",value:function(e){var t=this.componentToRender_,n=t.config,o=t.tag;n.children=this.buildChildren_(e.config.children),this.componentToRender_=null,this.currentPrefix_=this.prevPrefix_,this.prevPrefix_=null,this.renderFromTag_(o,n)}},{key:"handleChildRender_",value:function(e){if(e.tag&&u.isComponentTag(e.tag))return e.config.children=this.buildChildren_(e.config.children),this.renderFromTag_(e.tag,e.config),!0}},{key:"handleComponentRendererStateKeyChanged_",value:function(e){this.handleStateKeyChanged_(e),babelHelpers.get(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"handleComponentRendererStateKeyChanged_",this).call(this,e)}},{key:"handleInterceptedOpenCall_",value:function(e,t){return u.isComponentTag(t)?this.handleSubComponentCall_.apply(this,arguments):this.handleRegularCall_.apply(this,arguments)}},{key:"handleRegularCall_",value:function(e){for(var t=g.getComponentBeingRendered(),n=t.getRenderer(),o=arguments.length,i=Array(o>1?o-1:0),r=1;r<o;r++)i[r-1]=arguments[r];!n.rootElementReached_&&t.config.key&&(i[1]=t.config.key);var a=e.apply(null,i);return this.attachDecoratedListeners_(a,i),this.updateElementIfNotReached_(a),a}},{key:"handleStateKeyChanged_",value:function(e){this.changes_[e.key]=e}},{key:"handleSubComponentCall_",value:function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var r=u.buildConfigFromCall(o);r.ref=e.isDefAndNotNull(r.ref)?r.ref:this.buildRef(o[0]),this.componentToRender_={config:r,tag:o[0]},this.prevPrefix_=this.currentPrefix_,this.currentPrefix_=r.ref,this.generatedRefCount_[this.currentPrefix_]=0,s.capture(this,this.handleChildrenCaptured_)}},{key:"intercept_",value:function(){a.startInterception({attributes:this.handleInterceptedAttributesCall_,elementOpen:this.handleInterceptedOpenCall_})}},{key:"getEventFromListenerAttr_",value:function(e){var t=g.LISTENER_REGEX.exec(e),n=t?t[1]?t[1]:t[2]:null;return n?n.toLowerCase():null}},{key:"getParent",value:function(){return this.parent_}},{key:"getOwner",value:function(){return this.owner_}},{key:"render",value:function(){this.patch()}},{key:"renderChild",value:function(e){this.intercept_(),s.render(e,this.handleChildRender_),a.stopInterception()}},{key:"renderFromTag_",value:function(t,n){if(e.isString(t)||t.prototype.getRenderer){var o=this.renderSubComponent_(t,n);return this.updateElementIfNotReached_(o.element),o.element}return t(n)}},{key:"renderIncDom",value:function(){this.component_.render?this.component_.render():IncrementalDOM.elementVoid("div")}},{key:"renderInsidePatch",value:function(){return this.component_.wasRendered&&!this.shouldUpdate(this.changes_)&&IncrementalDOM.currentPointer()===this.component_.element?void(this.component_.element&&IncrementalDOM.skipNode()):void this.renderInsidePatchDontSkip_()}},{key:"renderInsidePatchDontSkip_",value:function(){g.startedRenderingComponent(this.component_),this.changes_={},this.rootElementReached_=!1,l.schedule(this.childComponents_||[]),this.childComponents_=[],this.generatedRefCount_={},this.listenersToAttach_=[],this.currentPrefix_="",this.intercept_(),this.renderIncDom(),a.stopInterception(),this.rootElementReached_?this.component_.addElementClasses():this.component_.element=null,this.emit("rendered",!this.isRendered_),g.finishedRenderingComponent()}},{key:"renderSubComponent_",value:function(e,t){var n=this.getSubComponent_(e,t);this.updateContext_(n);var o=n.getRenderer();if(o instanceof g){var i=g.getComponentBeingRendered();i.getRenderer().childComponents_.push(n),o.parent_=i,o.owner_=this.component_,o.renderInsidePatch()}return n.wasRendered||n.renderAsSubComponent(),n}},{key:"setConfig_",value:function(t,n){var o=t.config;t.config=n,e.isFunction(t.configChanged)&&t.configChanged(n,o||{}),t.emit("configChanged",{prevVal:o,newVal:n})}},{key:"shouldUpdate",value:function(e){return!this.component_.shouldUpdate||this.component_.shouldUpdate(e)}},{key:"patch",value:function(){if(!this.component_.element&&this.parent_)return void this.parent_.getRenderer().patch();var e=this.guaranteeParent_();if(e)IncrementalDOM.patch(e,this.renderInsidePatchDontSkip_),n.exitDocument(this.component_.element),this.component_.element&&this.component_.inDocument&&this.component_.renderElement_(this.attachData_.parent,this.attachData_.sibling);else{var t=this.component_.element;IncrementalDOM.patchOuter(t,this.renderInsidePatchDontSkip_),this.component_.element||n.exitDocument(t)}}},{key:"update",value:function(){this.hasChangedBesidesElement_(this.changes_)&&this.shouldUpdate(this.changes_)&&this.patch()}},{key:"updateElementIfNotReached_",value:function(e){var t=g.getComponentBeingRendered(),n=t.getRenderer();n.rootElementReached_||(n.rootElementReached_=!0,t.element!==e&&(t.element=e))}},{key:"updateContext_",value:function(e){var n=e.context,o=g.getComponentBeingRendered(),i=o.getChildContext?o.getChildContext():{};t.mixin(n,o.context,i),e.context=n}}],[{key:"getComponentBeingRendered",value:function(){return c[c.length-1]}},{key:"finishedRenderingComponent",value:function(){c.pop(),0===c.length&&l.disposeUnused()}},{key:"isIncDomNode",value:function(e){return!!e[s.CHILD_OWNER]}},{key:"render",value:function(e,t,n){if(!o.isComponentCtor(e)){var i=e,r=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"created",value:function(){g.getComponentBeingRendered()&&this.getRenderer().updateContext_(this)}},{key:"render",value:function(){i(this.config)}}]),t}(o);r.RENDERER=g,e=r}return o.render(e,t,n)}},{key:"renderChild",value:function(e){e[s.CHILD_OWNER].renderChild(e)}},{key:"startedRenderingComponent",value:function(e){c.push(e)}}]),g}(r),c=[],d=[];g.LISTENER_REGEX=/^(?:on([A-Z]\w+))|(?:data-on(\w+))$/,this.metal.IncrementalDomRenderer=g}.call(this),function(){(function(){this.CLOSURE_NO_DEPS=!0,this.goog=this.goog||{};var COMPILED=!1,goog=this.goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,n){var o=e.split("."),i=n||goog.global;o[0]in i||!i.execScript||i.execScript("var "+o[0]);for(var r;o.length&&(r=o.shift());)!o.length&&goog.isDef(t)?i[r]=t:i=i[r]?i[r]:i[r]={}},goog.define=function(e,t){var n=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?n=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(n=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,n)},goog.define("goog.DEBUG",!0),goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG),goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",!1),goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||e.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED)return goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var n,o=e.split("."),i=t||goog.global;n=o.shift();){if(!goog.isDefAndNotNull(i[n]))return null;i=i[n]}return i},goog.globalize=function(e,t){var n=t||goog.global;for(var o in e)n[o]=e[o]},goog.addDependency=function(e,t,n,o){if(goog.DEPENDENCIES_ENABLED){var i,r,a=e.replace(/\\/g,"/"),s=goog.dependencies_;o&&"boolean"!=typeof o||(o=o?{module:"goog"}:{});for(var l=0;i=t[l];l++)s.nameToPath[i]=a,s.pathIsModule[a]="goog"==o.module;for(var u=0;r=n[u];u++)a in s.requires||(s.requires[a]={}),s.requires[a][r]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.writeScripts_(t),null}var n="goog.require could not find: "+e;throw goog.logToConsole_(n),Error(n)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))return void(goog.basePath=goog.global.CLOSURE_BASE_PATH);if(goog.inHtmlDocument_())for(var e=goog.global.document,t=e.getElementsByTagName("SCRIPT"),n=t.length-1;n>=0;--n){var o=t[n],i=o.src,r=i.lastIndexOf("?"),a=r==-1?i.length:r;if("base.js"==i.substr(a-7,7))return void(goog.basePath=i.substr(0,a-7))}},goog.importScript_=function(e,t){var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;n(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(e){var t='goog.retrieveAndExecModule_("'+e+'");';goog.importScript_("",t)&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(e>0){var t=goog.queuedModules_;goog.queuedModules_=[];for(var n=0;n<e;n++){var o=t[n];goog.maybeProcessDeferredPath_(o)}}},goog.maybeProcessDeferredDep_=function(e){if(goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)){var t=goog.getPathFromDeps_(e);goog.maybeProcessDeferredPath_(goog.basePath+t)}},goog.isDeferredModule_=function(e){var t=goog.getPathFromDeps_(e);if(t&&goog.dependencies_.pathIsModule[t]){var n=goog.basePath+t;return n in goog.dependencies_.deferred}return!1},goog.allDepsAreAvailable_=function(e){var t=goog.getPathFromDeps_(e);if(t&&t in goog.dependencies_.requires)for(var n in goog.dependencies_.requires[t])if(!goog.isProvided_(n)&&!goog.isDeferredModule_(n))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModuleFromUrl=function(e){goog.retrieveAndExecModule_(e)},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1};var n;if(goog.isFunction(e))n=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");n=goog.loadModuleFromSource_.call(goog.global,e)}var o=goog.moduleLoaderState_.moduleName;if(!goog.isString(o)||!o)throw Error('Invalid module name "'+o+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(o,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(n),goog.loadedModules_[o]=n}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(){"use strict";var exports={};return eval(arguments[0]),exports},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"></script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,n=t.createElement("script");n.type="text/javascript",n.src=e,n.defer=!1,n.async=!1,t.head.appendChild(n)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var n=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==n.readyState){var o=/\bdeps.js$/.test(e);if(o)return!1;throw Error('Cannot write "'+e+'" after document load')}var i=goog.IS_OLD_IE_;if(void 0===t)if(i){var r=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";n.write('<script type="text/javascript" src="'+e+'"'+r+"></script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e);else n.write('<script type="text/javascript">'+t+"</script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(e){function t(e){if(!(e in i.written||e in i.visited)){if(i.visited[e]=!0,e in i.requires)for(var r in i.requires[e])if(!goog.isProvided_(r)){if(!(r in i.nameToPath))throw Error("Undefined nameToPath for "+r);t(i.nameToPath[r])}e in o||(o[e]=!0,n.push(e))}}var n=[],o={},i=goog.dependencies_;t(e);for(var r=0;r<n.length;r++){var a=n[r];goog.dependencies_.written[a]=!0}var s=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var r=0;r<n.length;r++){var a=n[r];if(!a)throw goog.moduleLoaderState_=s,Error("Undefined script input");i.pathIsModule[a]?goog.importModule_(goog.basePath+a):goog.importScript_(goog.basePath+a)}goog.moduleLoaderState_=s},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.normalizePath_=function(e){for(var t=e.split("/"),n=0;n<t.length;)"."==t[n]?t.splice(n,1):n&&".."==t[n]&&t[n-1]&&".."!=t[n-1]?t.splice(--n,2):n++;return t.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),t.responseText},goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,o=goog.loadFileSync_(e);if(null==o)throw new Error("load of "+e+"failed");var i=goog.wrapModule_(e,o),r=goog.IS_OLD_IE_;r?(goog.dependencies_.deferred[t]=i,goog.queuedModules_.push(t)):n(e,i)}},goog.typeOf=function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);/** @preserveTry */
try{delete e[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var n="array"==t?[]:{};for(var o in e)n[o]=goog.cloneObject(e[o]);return n}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw new Error;if(arguments.length>2){var o=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,o),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var n=goog.global.document,o=n.createElement("SCRIPT");o.type="text/javascript",o.defer=!1,o.appendChild(n.createTextNode(e)),n.body.appendChild(o),n.body.removeChild(o)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(e,t){var n,o=function(e){return goog.cssNameMapping_[e]||e},i=function(e){for(var t=e.split("-"),n=[],i=0;i<t.length;i++)n.push(o(t[i]));return n.join("-")};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:i:function(e){return e},t?e+"-"+n(t):n(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,o){for(var i=new Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return t.prototype[n].apply(e,i)}},goog.base=function(e,t,n){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(o.superClass_){for(var i=new Array(arguments.length-1),r=1;r<arguments.length;r++)i[r-1]=arguments[r];return o.superClass_.constructor.apply(e,i)}for(var a=new Array(arguments.length-2),r=2;r<arguments.length;r++)a[r-2]=arguments[r];for(var s=!1,l=e.constructor;l;l=l.superClass_&&l.superClass_.constructor)if(l.prototype[t]===o)s=!0;else if(s)return l.prototype[t].apply(e,a);if(e[t]===o)return e.constructor.prototype[t].apply(e,a);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.provide("goog.string"),goog.string.subs=function(e,t){for(var n=e.split("%s"),o="",i=Array.prototype.slice.call(arguments,1);i.length&&n.length>1;)o+=n.shift()+i.shift();return o+n.join("%s")},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var n,o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};return n=t?t.createElement("div"):goog.global.document.createElement("div"),e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var i=o[e];if(i)return i;if("#"==t.charAt(0)){var r=Number("0"+t.substr(1));isNaN(r)||(i=String.fromCharCode(r))}return i||(n.innerHTML=e+" ",i=n.firstChild.nodeValue.slice(0,-1)),o[e]=i})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var n=Number("0"+t.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return e}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.contains=function(e,t){return e.indexOf(t)!=-1},goog.string.htmlEscape=function(e,t){return t?(e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):goog.string.ALL_RE_.test(e)?(e.indexOf("&")!=-1&&(e=e.replace(goog.string.AMP_RE_,"&amp;")),e.indexOf("<")!=-1&&(e=e.replace(goog.string.LT_RE_,"&lt;")),e.indexOf(">")!=-1&&(e=e.replace(goog.string.GT_RE_,"&gt;")),e.indexOf('"')!=-1&&(e=e.replace(goog.string.QUOT_RE_,"&quot;")),e.indexOf("'")!=-1&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),e.indexOf("\0")!=-1&&(e=e.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&e.indexOf("e")!=-1&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):e},goog.debug={},goog.debug.runtimeType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":"undefined"==typeof e?"undefined":babelHelpers["typeof"](e)},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=(new Error).stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.provide("goog.i18n.bidi"),goog.provide("goog.i18n.bidi.Dir"),goog.provide("goog.i18n.bidi.DirectionalString"),goog.provide("goog.i18n.bidi.Format"),goog.define("goog.i18n.bidi.FORCE_RTL",!1),goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||goog.LOCALE.length>=3&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4)),goog.i18n.bidi.Format={LRE:"",RLE:"",PDF:"",LRM:"",RLM:""},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?e>0?goog.i18n.bidi.Dir.LTR:e<0?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z--------",goog.i18n.bidi.rtlChars_="----",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=new RegExp("^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)","i"),goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){var n=void 0===t?goog.i18n.bidi.hasAnyRtl(e):t,o=n?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return e.replace(goog.i18n.bidi.bracketGuardTextRe_,o+"$&"+o)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){for(var n=0,o=0,i=!1,r=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),a=0;a<r.length;a++){var s=r[a];goog.i18n.bidi.startsWithRtl(s)?(n++,o++):goog.i18n.bidi.isRequiredLtrRe_.test(s)?i=!0:goog.i18n.bidi.hasAnyLtr(s)?o++:goog.i18n.bidi.hasNumeralsRe_.test(s)&&(i=!0)}return 0==o?i?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:n/o>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t),t&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr"))},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.i18n.bidi.DirectionalString.prototype.implementsGoogI18nBidiDirectionalString,goog.i18n.bidi.DirectionalString.prototype.getDirection,goog.provide("goog.asserts"),goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG),goog.asserts.AssertionError=function(e,t){t.unshift(e),goog.debug.Error.call(this,goog.string.subs.apply(null,t)),t.shift(),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(e,t,n,o){var i="Assertion failed";if(n){i+=": "+n;var r=o}else e&&(i+=": "+e,r=t);var a=new goog.asserts.AssertionError(""+i,r||[]);goog.asserts.errorHandler_(a)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,o){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":"undefined"==typeof e?"undefined":babelHelpers["typeof"](e)},goog.string.StringBuffer=function(e,t){null!=e&&this.append.apply(this,arguments)},goog.string.StringBuffer.prototype.buffer_="",goog.string.StringBuffer.prototype.set=function(e){this.buffer_=""+e},goog.string.StringBuffer.prototype.append=function(e,t,n){if(this.buffer_+=String(e),null!=t)for(var o=1;o<arguments.length;o++)this.buffer_+=arguments[o];return this},goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""},goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length},goog.string.StringBuffer.prototype.toString=function(){return this.buffer_},goog.soy={},goog.soy.data={},goog.soy.data.SanitizedContentKind={HTML:goog.DEBUG?{sanitizedContentKindHtml:!0}:{},JS:goog.DEBUG?{sanitizedContentJsChars:!0}:{},URI:goog.DEBUG?{sanitizedContentUri:!0}:{},TRUSTED_RESOURCE_URI:goog.DEBUG?{sanitizedContentTrustedResourceUri:!0}:{},ATTRIBUTES:goog.DEBUG?{sanitizedContentHtmlAttribute:!0}:{},CSS:goog.DEBUG?{sanitizedContentCss:!0}:{},TEXT:goog.DEBUG?{sanitizedContentKindText:!0}:{}},goog.soy.data.SanitizedContent=function(){throw Error("Do not instantiate directly")},goog.soy.data.SanitizedContent.prototype.contentKind,goog.soy.data.SanitizedContent.prototype.contentDir=null,goog.soy.data.SanitizedContent.prototype.content,goog.soy.data.SanitizedContent.prototype.getContent=function(){return this.content},goog.soy.data.SanitizedContent.prototype.toString=function(){return this.content},goog.soy.data.UnsanitizedText=function(){goog.soy.data.UnsanitizedText.base(this,"constructor")},goog.inherits(goog.soy.data.UnsanitizedText,goog.soy.data.SanitizedContent),function(){var e={};e.asserts={},e.esc={};var t={};e.StringBuilder=goog.string.StringBuffer,t.SanitizedContentKind=goog.soy.data.SanitizedContentKind,t.isContentKind=function(e,t){return null!=e&&e.contentKind===t},t.SanitizedUri=function(){goog.soy.data.SanitizedContent.call(this)},goog.inherits(t.SanitizedUri,goog.soy.data.SanitizedContent),t.SanitizedUri.prototype.contentKind=t.SanitizedContentKind.URI,t.SanitizedUri.prototype.contentDir=goog.i18n.bidi.Dir.LTR,t.UnsanitizedText=function(e,t){this.content=String(e),this.contentDir=null!=t?t:null},goog.inherits(t.UnsanitizedText,goog.soy.data.UnsanitizedText),t.UnsanitizedText.prototype.contentKind=t.SanitizedContentKind.TEXT,t.$$EMPTY_STRING_={VALUE:""},t.$$makeSanitizedContentFactory_=function(e){function t(e){this.content=e}function n(e,n){var o=new t(String(e));return void 0!==n&&(o.contentDir=n),o}return t.prototype=e.prototype,n},t.$$makeSanitizedContentFactoryWithDefaultDirOnly_=function(e){function t(e){this.content=e}function n(e){var n=new t(String(e));return n}return t.prototype=e.prototype,n},t.markUnsanitizedText=function(e,n){return new t.UnsanitizedText(e,n)},t.VERY_UNSAFE={},t.VERY_UNSAFE.ordainSanitizedUri=t.$$makeSanitizedContentFactoryWithDefaultDirOnly_(t.SanitizedUri),e.$$augmentMap=function(t,n){return e.$$assignDefaults(e.$$assignDefaults({},n),t)},e.$$assignDefaults=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},e.$$checkMapKey=function(e){if("string"!=typeof e)throw Error("Map literal's key expression must evaluate to string (encountered type \""+("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))+'").');return e},e.$$getMapKeys=function(e){var t=[];for(var n in e)t.push(n);return t},e.$$checkNotNull=function(e){if(null==e)throw Error("unexpected null value");return e},e.$$getDelTemplateId=function(e){return e},e.$$DELEGATE_REGISTRY_PRIORITIES_={},e.$$DELEGATE_REGISTRY_FUNCTIONS_={},e.$$registerDelegateFn=function(t,n,o,i){var r="key_"+t+":"+n,a=e.$$DELEGATE_REGISTRY_PRIORITIES_[r];if(void 0===a||o>a)e.$$DELEGATE_REGISTRY_PRIORITIES_[r]=o,e.$$DELEGATE_REGISTRY_FUNCTIONS_[r]=i;else if(o==a)throw Error('Encountered two active delegates with the same priority ("'+t+":"+n+'").')},e.$$getDelegateFn=function(t,n,o){var i=e.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+t+":"+n];if(i||""==n||(i=e.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+t+":"]),i)return i;if(o)return e.$$EMPTY_TEMPLATE_FN_;throw Error('Found no active impl for delegate call to "'+t+":"+n+'" (and not allowemptydefault="true").')},e.$$EMPTY_TEMPLATE_FN_=function(e,t,n){return""},e.$$truncate=function(t,n,o){return t=String(t),t.length<=n?t:(o&&(n>3?n-=3:o=!1),e.$$isHighSurrogate_(t.charAt(n-1))&&e.$$isLowSurrogate_(t.charAt(n))&&(n-=1),t=t.substring(0,n),o&&(t+="..."),t)},e.$$isHighSurrogate_=function(e){return 55296<=e&&e<=56319},e.$$isLowSurrogate_=function(e){return 56320<=e&&e<=57343},e.asserts.assertType=function(e,t,n,o,i){var r="expected param "+t+" of type "+o+(goog.DEBUG?", but got "+goog.debug.runtimeType(n):"")+".";return goog.asserts.assert(e,r,i)},e.esc.$$escapeHtmlHelper=function(e){return goog.string.htmlEscape(String(e))},e.$$filterImageDataUri=function(n){return t.VERY_UNSAFE.ordainSanitizedUri(e.esc.$$filterImageDataUriHelper(n))},e.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_=/^data:image\/(?:bmp|gif|jpe?g|png|tiff|webp);base64,[a-z0-9+\/]+=*$/i,e.esc.$$filterImageDataUriHelper=function(t){var n=String(t);return e.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_.test(n)?n:(goog.asserts.fail("Bad value `%s` for |filterImageDataUri",[n]),"data:image/gif;base64,zSoyz")},goog.loadModule(function(){return goog.module("soy"),e}),goog.loadModule(function(){return goog.module("soydata"),t}),goog.loadModule(function(){return goog.module("soy.asserts"),e})}(),goog.loadModule(function(){return goog.module("incrementaldom"),IncrementalDOM})}).call(window)}.call(this),function(){/*
  * HTML5 Parser By Sam Blowes
  *
  * Designed for HTML5 documents
  *
  * Original code by John Resig (ejohn.org)
  * http://ejohn.org/blog/pure-javascript-html-parser/
  * Original code by Erik Arvidsson, Mozilla Public License
  * http://erik.eae.net/simplehtmlparser/simplehtmlparser.js
  *
  * ----------------------------------------------------------------------------
  * License
  * ----------------------------------------------------------------------------
  *
  * This code is triple licensed using Apache Software License 2.0,
  * Mozilla Public License or GNU Public License
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * Licensed under the Apache License, Version 2.0 (the "License"); you may not
  * use this file except in compliance with the License.  You may obtain a copy
  * of the License at http://www.apache.org/licenses/LICENSE-2.0
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * The contents of this file are subject to the Mozilla Public License
  * Version 1.1 (the "License"); you may not use this file except in
  * compliance with the License. You may obtain a copy of the License at
  * http://www.mozilla.org/MPL/
  *
  * Software distributed under the License is distributed on an "AS IS"
  * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  * License for the specific language governing rights and limitations
  * under the License.
  *
  * The Original Code is Simple HTML Parser.
  *
  * The Initial Developer of the Original Code is Erik Arvidsson.
  * Portions created by Erik Arvidssson are Copyright (C) 2004. All Rights
  * Reserved.
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
  * as published by the Free Software Foundation; either version 2
  * of the License, or (at your option) any later version.
  *
  * This program is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
  * @license
  */
(function(){function e(e){for(var t={},n=e.split(","),o=0;o<n.length;o++)t[n[o]]=!0;return t}var t=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,n=/^<\/([-A-Za-z0-9_]+)[^>]*>/,o=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,i=e("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),r=e("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),a=e("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),s=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),l=e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),u=e("script,style");window.HTMLParser=function(e,g){function c(e,t,n,u){if(t=t.toLowerCase(),r[t])for(;m.last()&&a[m.last()];)d("",m.last());if(s[t]&&m.last()==t&&d("",t),u=i[t]||!!u,u||m.push(t),g.start){var c=[];n.replace(o,function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:l[t]?t:"";c.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})}),g.start&&g.start(t,c,u)}}function d(e,t){if(t)for(var n=m.length-1;n>=0&&m[n]!=t;n--);else var n=0;if(n>=0){for(var o=m.length-1;o>=n;o--)g.end&&g.end(m[o]);m.length=n}}var h,p,f,m=[],_=e;for(m.last=function(){return this[this.length-1]};e;){if(p=!0,m.last()&&u[m.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+m.last()+"[^>]*>"),function(e,t){return t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),g.chars&&g.chars(t),""}),d("",m.last());else if(0==e.indexOf("<!--")?(h=e.indexOf("-->"),h>=0&&(g.comment&&g.comment(e.substring(4,h)),e=e.substring(h+3),p=!1)):0==e.indexOf("</")?(f=e.match(n),f&&(e=e.substring(f[0].length),f[0].replace(n,d),p=!1)):0==e.indexOf("<")&&(f=e.match(t),f&&(e=e.substring(f[0].length),f[0].replace(t,c),p=!1)),p){h=e.indexOf("<");var v=h<0?e:e.substring(0,h);e=h<0?"":e.substring(h),g.chars&&g.chars(v)}if(e==_)throw"Parse Error: "+e;_=e}d()}}).call(this)}.call(this),function(){function e(e){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},o=document.createElement("div");return e.replace(t,function(e,t){var i=n[e];if(i)return i;if("#"===t.charAt(0)){var r=Number("0"+t.substr(1));isNaN(r)||(i=String.fromCharCode(r))}return i||(o.innerHTML=e+" ",i=o.firstChild.nodeValue.slice(0,-1)),n[e]=i,i})}this.metal.unescape=e;var t=/&([^;\s<&]+);?/g}.call(this),function(){var e,t=this.metal.unescape,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"buildFn",value:function(e){return function(){return n.run(e)}}},{key:"getParser",value:function(){return e||window.HTMLParser}},{key:"run",value:function(e){n.getParser()(e,{start:function(e,t,n){for(var o=n?IncrementalDOM.elementVoid:IncrementalDOM.elementOpen,i=[e,null,[]],r=0;r<t.length;r++)i.push(t[r].name,t[r].value);o.apply(null,i)},end:function(e){IncrementalDOM.elementClose(e)},chars:function(e){IncrementalDOM.text(e,t)}})}},{key:"setParser",value:function(t){e=t}}]),n}();this.metal.HTML2IncDom=n}.call(this),function(){var e=this.metal.HTML2IncDom;this.metal.withParser=e}.call(this),function(){var e={interceptFns_:[],getOriginalFn:function(e){return e.originalFn?e.originalFn:e},handleTemplateCall_:function(t,n,o,i){var r=e.interceptFns_[e.interceptFns_.length-1];return r?r.call(null,t,n,o,i):t.call(null,n,o,i)},registerForInterception:function(t,n){var o=t[n];o.originalFn||(t[n]=e.handleTemplateCall_.bind(null,o),t[n].originalFn=o)},startInterception:function(t){e.interceptFns_.push(t)},stopAllInterceptions:function(){e.interceptFns_=[]},stopInterception:function(){e.interceptFns_.pop()}};this.metal.SoyAop=e}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metalNamed.component.ComponentRegistry,o=this.metal.withParser,i=this.metal.IncrementalDomRenderer,r=this.metal.SoyAop,a={},s=function(i){function s(e){babelHelpers.classCallCheck(this,s);var t=babelHelpers.possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.addMissingStateKeys_(),t}return babelHelpers.inherits(s,i),babelHelpers.createClass(s,[{key:"addMissingStateKeys_",value:function(){var t=this.component_.constructor.TEMPLATE;if(e.isFunction(t)){t=r.getOriginalFn(t),this.soyParamTypes_=t.types||{};for(var n=t.params||[],o=this.component_,i=0;i<n.length;i++)o.getStateKeyConfig(n[i])||o[n[i]]||o.addToState(n[i],{},o.getInitialConfig()[n[i]])}}},{key:"buildTemplateData_",value:function(n){var o=this,i=this.component_,r=t.mixin({},i.config);i.getStateKeys().forEach(function(e){if("element"!==e){var t=i[e];o.isHtmlParam_(e)&&(t=s.toIncDom(t)),r[e]=t}});for(var a=0;a<n.length;a++)!r[n[a]]&&e.isFunction(i[n[a]])&&(r[n[a]]=i[n[a]].bind(i));return r}},{key:"isHtmlParam_",value:function(e){if(this.component_.getStateKeyConfig(e).isHtml)return!0;var t=this.soyParamTypes_[e]||"";return t.split("|").indexOf("html")!==-1}},{key:"renderIncDom",value:function(){var t=this.component_.constructor.TEMPLATE;e.isFunction(t)&&!this.component_.render?(t=r.getOriginalFn(t),r.startInterception(s.handleInterceptedCall_),t(this.buildTemplateData_(t.params||[]),null,a),r.stopInterception()):babelHelpers.get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"renderIncDom",this).call(this)}},{key:"shouldUpdate",value:function(e){var t=babelHelpers.get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"shouldUpdate",this).call(this,e);if(!t||this.component_.shouldUpdate)return t;for(var n=this.component_.constructor.TEMPLATE,o=n?r.getOriginalFn(n).params:[],i=0;i<o.length;i++)if(e[o[i]])return!0;return!1}}],[{key:"getTemplate",value:function(e,t){return function(n,o,i){if(!goog.loadedModules_[e])throw new Error('No template with namespace "'+e+'" has been loaded yet.');return goog.loadedModules_[e][t](n,o,i)}}},{key:"handleInterceptedCall_",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[e.componentCtor,null,[]];for(var o in t)n.push(o,t[o]);IncrementalDOM.elementVoid.apply(null,n)}},{key:"register",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"render";e.RENDERER=s,e.TEMPLATE=r.getOriginalFn(t[o]),e.TEMPLATE.componentCtor=e,r.registerForInterception(t,o),n.register(e)}},{key:"setInjectedData",value:function(e){a=e||{}}},{key:"toHtmlString",value:function(e){var t=document.createElement("div");return IncrementalDOM.patch(t,e),t.innerHTML}},{key:"toIncDom",value:function(t){return e.isObject(t)&&e.isString(t.content)&&"HTML"===t.contentKind&&(t=t.content),e.isString(t)&&(t=o.buildFn(t)),t}}]),s}(i);this.metal.Soy=s,this.metalNamed.Soy=this.metalNamed.Soy||{},this.metalNamed.Soy.Soy=s,this.metalNamed.Soy.SoyAop=r}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){o.asserts.assertType(null==e.body||e.body instanceof Function||e.body instanceof i.UnsanitizedText||goog.isString(e.body),"body",e.body,"?soydata.SanitizedHtml|string|undefined");var r=e.body;a("div",null,null,"class","alert"+(e.elementClasses?" "+e.elementClasses:""),"role","alert"),e.spinner&&l("span",null,null,"class","spinner"+(e.spinnerClasses?" "+e.spinnerClasses:"")+(e.spinnerDone?" spinner-done":"")),r&&(a("span",null,null,"class","alert-body"),r(),s("span")),e.dismissible&&(a("button",null,null,"type","button","class","close","aria-label","Close","data-onclick","toggle"),a("span",null,null,"aria-hidden","true"),u(""),s("span"),s("button")),s("div")}goog.module("Toast.incrementaldom");var o=goog.require("soy"),i=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var r=goog.require("incrementaldom"),a=r.elementOpen,s=r.elementClose,l=r.elementVoid,u=(r.elementOpenStart,r.elementOpenEnd,r.text);r.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Toast.render"),t.render.params=["body","dismissible","spinner","spinnerDone","elementClasses","spinnerClasses"],t.render.types={body:"html",dismissible:"any",spinner:"any",spinnerDone:"any",elementClasses:"any",spinnerClasses:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Toast=this.metalNamed.Toast||{},this.metalNamed.Toast.Toast=o,this.metalNamed.Toast.templates=e,this.metal.Toast=e}.call(this),function(){var e=this.metal.metal,t=this.metalNamed.dom.dom,n=this.metalNamed.dom.features,o=function(){function o(){babelHelpers.classCallCheck(this,o)}return babelHelpers.createClass(o,null,[{key:"emulateEnd",value:function(e,t){return this.getComputedDurationMs(e,"animation")>this.getComputedDurationMs(e,"transition")?this.emulateEnd_(e,"animation",t):this.emulateEnd_(e,"transition",t)}},{key:"emulateAnimationEnd",value:function(e,t){return this.emulateEnd_(e,"animation",t)}},{key:"emulateTransitionEnd",value:function(e,t){this.emulateEnd_(e,"transition",t)}},{key:"emulateEnd_",value:function(o,i,r){var a=r;e.isDef(r)||(a=this.getComputedDurationMs(o,i));var s=setTimeout(function(){t.triggerEvent(o,n.checkAnimationEventName()[i])},a),l=function(){clearTimeout(s),u.removeListener()},u=t.once(o,i+"end",l);return{abort:l}}},{key:"getComputedDurationMs",value:function(e,t){return 1e3*(parseFloat(window.getComputedStyle(e,null).getPropertyValue(t+"-duration"))||0)}}]),o}();this.metal.Anim=o}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},o.asserts.assertType(null==e.body||e.body instanceof Function||e.body instanceof i.UnsanitizedText||goog.isString(e.body),"body",e.body,"?soydata.SanitizedHtml|string|undefined");var r=e.body;a("div",null,null,"class","alert"+(e.dismissible?" alert-dismissible":"")+(e.elementClasses?" "+e.elementClasses:""),"role","alert"),r&&r(),e.dismissible&&(a("button",null,null,"type","button","class","close","aria-label","Close","data-onclick","toggle"),a("span",null,null,"aria-hidden","true"),l(""),s("span"),s("button")),s("div")}goog.module("Alert.incrementaldom");var o=goog.require("soy"),i=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi");var r=goog.require("incrementaldom"),a=r.elementOpen,s=r.elementClose,l=(r.elementVoid,r.elementOpenStart,r.elementOpenEnd,r.text);r.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Alert.render"),t.render.params=["body","dismissible","elementClasses"],t.render.types={body:"html",dismissible:"any",elementClasses:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Alert=this.metalNamed.Alert||{},this.metalNamed.Alert.Alert=o,this.metalNamed.Alert.templates=e,this.metal.Alert=e}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metal.dom,n=this.metal.Anim,o=this.metal.component,i=this.metalNamed.events.EventHandler,r=this.metal.Soy,a=this.metal.Alert,s=function(o){function r(){return babelHelpers.classCallCheck(this,r),babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return babelHelpers.inherits(r,o),babelHelpers.createClass(r,[{key:"created",value:function(){this.eventHandler_=new i}},{key:"detached",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners(),clearTimeout(this.delay_)}},{key:"close",value:function(){t.once(this.element,"animationend",this.dispose.bind(this)),t.once(this.element,"transitionend",this.dispose.bind(this)),this.eventHandler_.removeAllListeners(),this.syncVisible(!1)}},{key:"handleDocClick_",value:function(e){this.element.contains(e.target)||this.hide()}},{key:"hide",value:function(){this.visible=!1}},{key:"hideCompletely_",value:function(){this.isDisposed()||this.visible||babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"syncVisible",this).call(this,!1)}},{key:"toggle",value:function(){this.visible=!this.visible}},{key:"show",value:function(){this.visible=!0}},{key:"syncDismissible",value:function(e){e?this.eventHandler_.add(t.on(document,"click",this.handleDocClick_.bind(this))):this.eventHandler_.removeAllListeners()}},{key:"syncHideDelay",value:function(t){e.isNumber(t)&&this.visible&&(clearTimeout(this.delay_),this.delay_=setTimeout(this.hide.bind(this),t))}},{key:"syncVisible",value:function(o,i){var a=this,s=!1;o?e.isDef(i)&&(s=!0,babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"syncVisible",this).call(this,!0)):(t.once(this.element,"animationend",this.hideCompletely_.bind(this)),t.once(this.element,"transitionend",this.hideCompletely_.bind(this)));var l=function(){a.isDisposed()||(t.removeClasses(a.element,a.animClasses[o?"hide":"show"]),t.addClasses(a.element,a.animClasses[o?"show":"hide"]),n.emulateEnd(a.element),o&&e.isNumber(a.hideDelay)&&a.syncHideDelay(a.hideDelay))};s?setTimeout(l,0):l()}}]),r}(o);r.register(s,a),s.STATE={animClasses:{validator:e.isObject,value:{show:"fade in",hide:"fade"}},body:{isHtml:!0},dismissible:{validator:e.isBoolean,value:!0},elementClasses:{value:"alert-success"},hideDelay:{},visible:{value:!1}},this.metal.Alert=s}.call(this),function(){var e=this.metal.Toast,t=this.metal.Soy,n=this.metal.Alert,o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(n);o.STATE={animClasses:{value:{show:"animated slideInBottom",hide:"animated slideOutBottom"}},visible:{value:!0},spinner:{value:!0},spinnerClasses:{},spinnerDone:{value:!1}},t.register(o,e),this.metal.Toast=o}.call(this)}).call(this);